!function(){var e={703:function(e,t,n){"use strict";var o=n(414);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,l){if(l!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.wp.i18n,o=window.wp.components,r=window.wp.apiFetch,a=n.n(r),l=window.wp.hooks;const i=wp.element.createElement;var s=window.wp.data,c=window.wp.notices,u=window.wp.url;function d(){return(0,e.createElement)("div",{className:"formello-help"},(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Need help?","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)("p",null,(0,t.__)("Detailed documentation is available on the plugin website.","formello")),(0,e.createElement)(o.Button,{isSecondary:!0,href:"https://docs.formello.net",target:"_blank"},(0,t.__)("Documentation","formello")),(0,e.createElement)("p",null,(0,t.__)("We would love to help you out if you need any help.","formello")),(0,e.createElement)(o.Button,{isSecondary:!0,target:"_blank",href:"https://wordpress.org/support/plugin/formello/"},(0,t.__)("Ask a question","formello")))),(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Do you like the plugin?","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)("p",null,(0,t.__)("If you like the plugin you can share a review to help us and spread some love!","formello")),(0,e.createElement)(o.Button,{isPrimary:!0,target:"_blank",className:"formello-ratings",href:"https://wordpress.org/support/plugin/formello/reviews/#new-post"},(0,t.__)("Rate","formello"),(0,e.createElement)(o.Icon,{icon:"star-filled"}),(0,e.createElement)(o.Icon,{icon:"star-filled"}),(0,e.createElement)(o.Icon,{icon:"star-filled"}),(0,e.createElement)(o.Icon,{icon:"star-filled"}),(0,e.createElement)(o.Icon,{icon:"star-filled"})))))}function p(n){const{settings:r,saveSetting:l,storeSettings:i}=n,[s,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(r.license_status),p=(e,t)=>{const n=t.target.nextElementSibling;c(!0),a()({path:"/formello/v1/license/"+e,method:"POST",data:{license:r.license}}).then((e=>{c(!1),e.response.success&&(l("license_status",e.response.license),d(e.response.license)),n.classList.add("formello-action-message--show"),n.classList.remove("formello-action-message--error"),n.textContent="License "+e.response.license,e.success&&e.response&&e.response.success||(n.textContent="License: "+e.response,n.classList.add("formello-action-message--error")),setTimeout((function(){n.classList.remove("formello-action-message--show")}),3e3)}))};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("License","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)(o.ExternalLink,{href:"https://formello.net"},(0,t.__)("Get a FREE API Key")),(0,e.createElement)(e.RawHTML,null,(0,t.sprintf)(
/* translators: Addon license. */
(0,t.__)("<p>Your %s key provides access to addons. You can still using Formello without a license key.</p>","formello"),"<strong>free license</strong>")),(0,e.createElement)(o.__experimentalInputControl,{type:"password",autoComplete:"new-password",label:(0,t.__)("License Key","formello"),value:r.license,onChange:e=>{l("license",e)},readOnly:"valid"===r.license_status}),(0,e.createElement)("div",null,"valid"===u?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(e.RawHTML,null,(0,t.sprintf)(
/* translators: License status. */
(0,t.__)('<p class="success">License status: %s.</p>',"formello"),"<strong>active</strong>")),(0,e.createElement)(o.Button,{onClick:e=>p("deactivate",e),isSecondary:!0,"aria-disabled":s,isBusy:s},"Deactivate")):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{onClick:e=>p("activate",e),"aria-disabled":s,isPrimary:!0,isBusy:s},"Activate")),(0,e.createElement)("span",{className:"formello-action-message"})))))}function m(n){const{saveSetting:r,saveSettingGroup:a,settings:l}=n;return(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Google reCaptcha","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)(o.RadioControl,{selected:l.reCaptcha.version,options:[{label:"reCaptcha v2 checkbox",value:"1"},{label:"reCaptcha v3 invisible",value:"3"}],onChange:e=>{a("reCaptcha","version",e)}}),(0,e.createElement)(o.TextControl,{label:(0,t.__)("Site Key","formello"),value:l.reCaptcha.site_key,onChange:e=>{a("reCaptcha","site_key",e)}}),(0,e.createElement)(o.TextControl,{label:(0,t.__)("Secret Key","formello"),value:l.reCaptcha.secret_key,onChange:e=>{a("reCaptcha","secret_key",e)}}),3===Number(l.reCaptcha.version)&&(0,e.createElement)(o.__experimentalNumberControl,{label:(0,t.__)("Threshold","formello"),value:l.reCaptcha.threshold,onChange:e=>{a("reCaptcha","threshold",e)},step:"0.1",min:"0",max:"1"})))}var f,h,g=window.React,v=n(697),y=function(){return y=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},y.apply(this,arguments)},E={onActivate:v.func,onAddUndo:v.func,onBeforeAddUndo:v.func,onBeforeExecCommand:v.func,onBeforeGetContent:v.func,onBeforeRenderUI:v.func,onBeforeSetContent:v.func,onBeforePaste:v.func,onBlur:v.func,onChange:v.func,onClearUndos:v.func,onClick:v.func,onContextMenu:v.func,onCopy:v.func,onCut:v.func,onDblclick:v.func,onDeactivate:v.func,onDirty:v.func,onDrag:v.func,onDragDrop:v.func,onDragEnd:v.func,onDragGesture:v.func,onDragOver:v.func,onDrop:v.func,onExecCommand:v.func,onFocus:v.func,onFocusIn:v.func,onFocusOut:v.func,onGetContent:v.func,onHide:v.func,onInit:v.func,onKeyDown:v.func,onKeyPress:v.func,onKeyUp:v.func,onLoadContent:v.func,onMouseDown:v.func,onMouseEnter:v.func,onMouseLeave:v.func,onMouseMove:v.func,onMouseOut:v.func,onMouseOver:v.func,onMouseUp:v.func,onNodeChange:v.func,onObjectResizeStart:v.func,onObjectResized:v.func,onObjectSelected:v.func,onPaste:v.func,onPostProcess:v.func,onPostRender:v.func,onPreProcess:v.func,onProgressState:v.func,onRedo:v.func,onRemove:v.func,onReset:v.func,onSaveContent:v.func,onSelectionChange:v.func,onSetAttrib:v.func,onSetContent:v.func,onShow:v.func,onSubmit:v.func,onUndo:v.func,onVisualAid:v.func},C=y({apiKey:v.string,id:v.string,inline:v.bool,init:v.object,initialValue:v.string,onEditorChange:v.func,value:v.string,tagName:v.string,cloudChannel:v.string,plugins:v.oneOfType([v.string,v.array]),toolbar:v.oneOfType([v.string,v.array]),disabled:v.bool,textareaName:v.string,tinymceScriptSrc:v.string,rollback:v.oneOfType([v.number,v.oneOf([!1])]),scriptLoading:v.shape({async:v.bool,defer:v.bool,delay:v.number})},E),b=function(e){return"function"==typeof e},_=function(e){return e in E},w=function(e){return e.substr(2)},L=function(e,t,n,o,r){return function(t,n,o,r,a,l,i){var s=Object.keys(a).filter(_),c=Object.keys(l).filter(_),u=s.filter((function(e){return void 0===l[e]})),d=c.filter((function(e){return void 0===a[e]}));u.forEach((function(e){var t=w(e),n=i[t];o(t,n),delete i[t]})),d.forEach((function(o){var r=function(t,n){return function(o){var r;return null===(r=t(n))||void 0===r?void 0:r(o,e)}}(t,o),a=w(o);i[a]=r,n(a,r)}))}(r,e.on.bind(e),e.off.bind(e),0,t,n,o)},k=0,S=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++k+String(t)},B=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},O=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},T=function(e,t){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(t):e.setMode(t))},N=function(){return{listeners:[],scriptId:S("tiny-script"),scriptLoading:!1,scriptLoaded:!1}},x=(f=N(),{load:function(e,t,n,o,r,a){var l=function(){return function(e,t,n,o,r,a){var l=t.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=e,l.src=n,l.async=o,l.defer=r;var i=function(){l.removeEventListener("load",i),f.listeners.forEach((function(e){return e()})),f.scriptLoaded=!0};l.addEventListener("load",i),t.head&&t.head.appendChild(l)}(f.scriptId,e,t,n,o)};f.scriptLoaded?a():(f.listeners.push(a),f.scriptLoading||(f.scriptLoading=!0,r>0?setTimeout(l,r):l()))},reinitialize:function(){f=N()}}),M=function(){var e="undefined"!=typeof window?window:n.g;return e&&e.tinymce?e.tinymce:null},I=(h=function(e,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},h(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),P=function(){return P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},P.apply(this,arguments)},R=function(){var e,t,n;return(null===(n=null===(t=null===(e=M())||void 0===e?void 0:e.Env)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.isIE())?"change keyup compositionend setcontent":"change input compositionend setcontent"},D=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"};function j(n){const{saveSettingGroup:r,settings:a,saveSetting:l}=n,i=(e,t,n)=>{const o=Object.assign({},a.messages[e]);o[t]=n,r("messages",e,o)},s=Object.keys(a.messages.missingValue),c=Object.keys(a.messages.patternMismatch),u=Object.keys(a.messages.outOfRange),d=Object.keys(a.messages.wrongLength);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Missing value","formello"))),(0,e.createElement)(o.CardBody,null,s.map(((n,r)=>(0,e.createElement)(e.Fragment,{key:r},(0,e.createElement)(o.TextControl,{label:(0,t.__)(n),value:a.messages.missingValue[n],onChange:e=>{i("missingValue",n,e)}})))))),(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Pattern mismatch","formello"))),(0,e.createElement)(o.CardBody,null,c.map(((n,r)=>(0,e.createElement)(o.TextControl,{key:r,label:(0,t.__)(n),value:a.messages.patternMismatch[n],onChange:e=>{i("patternMismatch",n,e)}}))))),(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Out of range","formello"))),(0,e.createElement)(o.CardBody,null,u.map(((n,r)=>(0,e.createElement)(o.TextControl,{key:r,label:(0,t.__)(n),value:a.messages.outOfRange[n],onChange:e=>{i("outOfRange",n,e)}}))))),(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Wrong length","formello"))),(0,e.createElement)(o.CardBody,null,d.map(((n,r)=>(0,e.createElement)(o.TextControl,{key:r,label:(0,t.__)(n),value:a.messages.wrongLength[n],onChange:e=>{i("wrongLength",n,e)}}))))))}function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},F.apply(this,arguments)}!function(e){function t(t){var n,o,r,a=this;return(a=e.call(this,t)||this).rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var e=a.editor,t=a.props.value;e&&t&&t!==a.currentContent&&e.undoManager.ignore((function(){if(e.setContent(t),a.valueCursor&&(!a.inline||e.hasFocus()))try{e.selection.moveToBookmark(a.valueCursor)}catch(e){}})),a.rollbackTimer=void 0},a.handleBeforeInput=function(e){if(void 0!==a.props.value&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch(e){}},a.handleBeforeInputSpecial=function(e){"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||a.handleBeforeInput(e)},a.handleEditorChange=function(e){var t=a.editor;if(t&&t.initialized){var n=t.getContent();void 0!==a.props.value&&a.props.value!==n&&!1!==a.props.rollback&&(a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,"number"==typeof a.props.rollback?a.props.rollback:200))),n!==a.currentContent&&(a.currentContent=n,b(a.props.onEditorChange)&&a.props.onEditorChange(n,t))}},a.handleEditorChangeSpecial=function(e){"Backspace"!==e.key&&"Delete"!==e.key||a.handleEditorChange(e)},a.initialise=function(e){var t,n,o;void 0===e&&(e=0);var r=a.elementRef.current;if(r)if(function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;null!=n;)n=(t=n).parentNode;return t===e.ownerDocument}return e.isConnected}(r)){var l=M();if(!l)throw new Error("tinymce should have been loaded into global scope");var i,s,c=P(P({},a.props.init),{selector:void 0,target:r,readonly:a.props.disabled,inline:a.inline,plugins:(i=null===(t=a.props.init)||void 0===t?void 0:t.plugins,s=a.props.plugins,O(i).concat(O(s))),toolbar:null!==(n=a.props.toolbar)&&void 0!==n?n:null===(o=a.props.init)||void 0===o?void 0:o.toolbar,setup:function(e){a.editor=e,a.bindHandlers({}),a.inline&&!B(r)&&e.once("PostRender",(function(t){e.setContent(a.getInitialValue(),{no_events:!0})})),a.props.init&&b(a.props.init.setup)&&a.props.init.setup(e)},init_instance_callback:function(e){var t,n,o=a.getInitialValue();a.currentContent=null!==(t=a.currentContent)&&void 0!==t?t:e.getContent(),a.currentContent!==o&&(a.currentContent=o,e.setContent(o),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var r=null!==(n=a.props.disabled)&&void 0!==n&&n;T(a.editor,r?"readonly":"design"),a.props.init&&b(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(e)}});a.inline||(r.style.visibility=""),B(r)&&(r.value=a.getInitialValue()),l.init(c)}else if(0===e)setTimeout((function(){return a.initialise(1)}),1);else{if(!(e<100))throw new Error("tinymce can only be initialised when in a document");setTimeout((function(){return a.initialise(e+1)}),100)}},a.id=a.props.id||S("tiny-react"),a.elementRef=g.createRef(),a.inline=null!==(r=null!==(n=a.props.inline)&&void 0!==n?n:null===(o=a.props.init)||void 0===o?void 0:o.inline)&&void 0!==r&&r,a.boundHandlers={},a}I(t,e),t.prototype.componentDidUpdate=function(e){var t,n,o=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var r=this.editor;r.undoManager.transact((function(){var e;if(!o.inline||r.hasFocus())try{e=r.selection.getBookmark(3)}catch(e){}var t=o.valueCursor;if(r.setContent(o.props.value),!o.inline||r.hasFocus())for(var n=0,a=[e,t];n<a.length;n++){var l=a[n];if(l)try{r.selection.moveToBookmark(l),o.valueCursor=l;break}catch(e){}}}))}if(this.props.disabled!==e.disabled){var a=null!==(n=this.props.disabled)&&void 0!==n&&n;T(this.editor,a?"readonly":"design")}}},t.prototype.componentDidMount=function(){var e,t,n,o,r,a;null!==M()?this.initialise():this.elementRef.current&&this.elementRef.current.ownerDocument&&x.load(this.elementRef.current.ownerDocument,this.getScriptSrc(),null!==(t=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async)&&void 0!==t&&t,null!==(o=null===(n=this.props.scriptLoading)||void 0===n?void 0:n.defer)&&void 0!==o&&o,null!==(a=null===(r=this.props.scriptLoading)||void 0===r?void 0:r.delay)&&void 0!==a?a:0,this.initialise)},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(R(),this.handleEditorChange),t.off(D(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return g.createElement(t,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return g.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSrc=function(){if("string"==typeof this.props.tinymceScriptSrc)return this.props.tinymceScriptSrc;var e=this.props.cloudChannel,t=this.props.apiKey?this.props.apiKey:"no-api-key";return"https://cdn.tiny.cloud/1/".concat(t,"/tinymce/").concat(e,"/tinymce.min.js")},t.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){L(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},o=n(e),r=n(this.props);!o&&r?(this.editor.on(R(),this.handleEditorChange),this.editor.on(D(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):o&&!r&&(this.editor.off(R(),this.handleEditorChange),this.editor.off(D(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=C,t.defaultProps={cloudChannel:"6"}}(g.Component);var H=window.wp.api,A=n.n(H);function z(n){const{title:r,addonSettings:l,optionName:i,name:s}=n,[c,u]=(0,e.useState)(!1),[d,p]=(0,e.useState)(l),m=(0,e.useRef)(),f=(e,t)=>{const n=m.current;u(!1),n.classList.add("formello-action-message--show"),n.classList.remove("formello-action-message--error"),"error"===t&&n.classList.add("formello-action-message--error"),n.textContent=e,setTimeout((function(){n.classList.remove("formello-action-message--show")}),3e3)},h=(e,t)=>{p({...d,[e]:t})};return(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,{size:"large",justify:"flex-start"},(0,e.createElement)("i",{className:s}),(0,e.createElement)("h2",null,r)),(0,e.createElement)(o.CardBody,null,(0,e.createElement)(o.BaseControl,null,(0,e.createElement)(o.__experimentalInputControl,{label:(0,t.__)("Api Key","formello-mailchimp"),value:d.api_key,onChange:e=>{h("api_key",e)},suffix:(0,e.createElement)(o.Button,{onClick:()=>(()=>{const e="valid"!==d.license_status?"activate":"deactivate";u(!0),a()({path:"/formello/v1/license/"+e,method:"POST",data:{license:d.license,item_name:r}}).then((e=>{u(!1),h("license_status",e.response.license),e.response.success&&f("License: "+e.response.license,"success"),e.success&&e.response&&e.response.success||f("License: "+e.response,"error")}),(e=>{f("License: "+e.message,"error")}))})(),isSecondary:!0,"aria-disabled":c,isBusy:c},(0,t.__)("Check","formello"))}),(0,e.createElement)("span",{ref:m,className:"formello-action-message"})),(0,e.createElement)(o.Button,{onClick:e=>(u(!0),void new(A().models.Settings)({[i]:d}).save().done((()=>{f((0,t.__)("Settings saved","formello"),"success")})).always((()=>u(!1))).catch((e=>f(e.message,"error")))),isPrimary:!0,"aria-disabled":c,isBusy:c},"Save")))}var V=(0,o.withFilters)("formello.settings")((n=>{const{globalSettings:r}=n,a=[],i=[];(0,l.applyFilters)("formello.AddonIntegration","",a);for(const t in a){let o=a[t].title,l=a[t].name,s="formello_"+l;i.push((0,e.createElement)(z,F({},n,{key:o,title:o,name:l,optionName:s,addonSettings:r[s]})))}return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Integrations","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)(e.RawHTML,null,(0,t.sprintf)(
/* translators: Link to addons. */
(0,t.__)("<p>Go to %s to download your preferred integrations. We are working on other integrations.</p>","formello"),'<a href="https://formello.net/addons/" target="_blank">addons page</a>')))),i)})),K=n=>{const{saveSetting:r,settings:a}=n;return(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Logging","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)("p",null,(0,t.__)("To enable logging, please set this as checked.","formello")),(0,e.createElement)(o.ToggleControl,{label:(0,t.__)("Enable log","formello"),checked:a.log,onChange:e=>{r("log",e)}}),a.log&&(0,e.createElement)(o.ExternalLink,{href:"/wp-content/uploads/formello/logs/"+a.log_file},(0,t.__)("View log","formello"))))};function U(n){const{title:r,addonSettings:l,optionName:i,name:s}=n,[c,u]=(0,e.useState)(!1),[d,p]=(0,e.useState)(l),m=(0,e.useRef)(),f=(e,t)=>{const n=m.current;u(!1),n.classList.add("formello-action-message--show"),n.classList.remove("formello-action-message--error"),"error"===t&&n.classList.add("formello-action-message--error"),n.textContent=e,setTimeout((function(){n.classList.remove("formello-action-message--show")}),3e3)},h=(e,t)=>{p({...d,[e]:t})};return(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,{size:"large",justify:"flex-start"},(0,e.createElement)("i",{className:s}),(0,e.createElement)("h2",null,r)),(0,e.createElement)(o.CardBody,null,(0,e.createElement)(o.BaseControl,null,(0,e.createElement)(o.__experimentalInputControl,{label:(0,t.__)("License Key","formello-mailchimp"),value:d.license,onChange:e=>{h("license",e)},readOnly:"valid"===d.license_status,suffix:(0,e.createElement)(o.Button,{onClick:()=>(()=>{const e="valid"!==d.license_status?"activate":"deactivate";u(!0),a()({path:"/formello/v1/license/"+e,method:"POST",data:{license:d.license,item_name:r}}).then((e=>{u(!1),h("license_status",e.response.license),e.response.success&&f("License: "+e.response.license,"success"),e.success&&e.response&&e.response.success||f("License: "+e.response,"error")}),(e=>{f("License: "+e.message,"error")}))})(),isPrimary:"valid"!==d.license_status,isSecondary:"valid"===d.license_status,"aria-disabled":c,isBusy:c},"valid"!==d.license_status?"Activate":"Deactivate")}),(0,e.createElement)("span",{ref:m,className:"formello-action-message"})),(0,e.createElement)(o.Button,{onClick:e=>(u(!0),void new(A().models.Settings)({[i]:d}).save().done((()=>{f((0,t.__)("Settings saved","formello"),"success")})).always((()=>u(!1))).catch((e=>f(e.message,"error")))),isPrimary:!0,"aria-disabled":c,isBusy:c},"Save")))}var G=(0,o.withFilters)("formello.licenses")((n=>{const{globalSettings:r}=n,a=[],i=[];(0,l.applyFilters)("formello.AddonsLicenses","",a);for(const t in a){let o=a[t].title,l=a[t].name,s="formello_"+l;i.push((0,e.createElement)(U,F({},n,{key:o,title:o,name:l,optionName:s,addonSettings:r[s]})))}return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Card,null,(0,e.createElement)(o.CardHeader,null,(0,e.createElement)("h2",null,(0,t.__)("Licenses","formello"))),(0,e.createElement)(o.CardBody,null,(0,e.createElement)(e.RawHTML,null,(0,t.sprintf)(
/* translators: Addon licenses link. */
(0,t.__)("<p>Here you can add license for %s.</p><p>To get your licenses key go to your %s.</p>","formello"),'<a href="https://formello.net/addons/" target="_blank">addons</a>','<a href="https://formello.net/account/" target="_blank">account</a>')))),i)})),W=window.lodash;function Y(){const{removeNotice:t}=(0,s.useDispatch)(c.store),n=(0,s.useSelect)((e=>e(c.store).getNotices()),[]),r=(0,W.filter)(n,{isDismissible:!0,type:"default"}),a=(0,W.filter)(n,{isDismissible:!1,type:"default"}),l=(0,W.filter)(n,{type:"snackbar"});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.NoticeList,{notices:a,className:"formello-notices__notice-list"}),(0,e.createElement)(o.NoticeList,{notices:r,className:"formello-notices__notice-list",onRemove:t}),(0,e.createElement)(o.SnackbarList,{notices:l,className:"formello-notices__snackbar-list",onRemove:t}))}function q(){const[n,r]=(0,e.useState)(!1),[a,f]=(0,e.useState)(!1),[h,g]=(0,e.useState)(),[v,y]=(0,e.useState)(),{createNotice:E,removeNotice:C}=(0,s.useDispatch)(c.store);(0,e.useEffect)((()=>{A().loadPromise.then((()=>{let e=new(A().models.Settings);!1===a&&e.fetch().then((e=>{g(e.formello),y(e),f(!0)}))}))}),[]);const b=[{name:"general",title:"General",component:p},{name:"recaptcha",title:"ReCaptcha",component:m},{name:"messages",title:"Messages",component:j},{name:"integrations",title:"Integrations",component:V},{name:"licenses",title:"Licenses",component:G},{name:"logging",title:"Logging",component:K}],_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"snackbar";C("settings"),E(e,t,{type:n,id:"settings"})},w=(e,t,n)=>{g({...h,[e]:{...h[e],[t]:n}})},L=(e,t)=>{g({...h,[e]:t})},k=(0,u.getQueryArg)(window.location.href,"tab");return a?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"formello-settings-header"},(0,e.createElement)("div",{className:"formello-container"},(0,e.createElement)("h1",null,"form"=="logo"?i("svg",{width:50,height:50,viewBox:"0 0 50 50",style:{padding:"1px"}},i("path",{d:"M 2.8125 2 A 1.0001 1.0001 0 0 0 2 3 L 2 47 A 1.0001 1.0001 0 0 0 3 48 L 47 48 A 1.0001 1.0001 0 0 0 48 47 L 48 3 A 1.0001 1.0001 0 0 0 47 2 L 3 2 A 1.0001 1.0001 0 0 0 2.90625 2 A 1.0001 1.0001 0 0 0 2.8125 2 z M 4 4 L 46 4 L 46 46 L 4 46 L 4 4 z M 18 11 L 18 12 L 18 18 L 18 19 L 19 19 L 41 19 L 42 19 L 42 18 L 42 12 L 42 11 L 41 11 L 19 11 L 18 11 z M 20 13 L 40 13 L 40 17 L 20 17 L 20 13 z M 8 14 L 8 16 L 16 16 L 16 14 L 8 14 z M 18 23 L 18 24 L 18 30 L 18 31 L 19 31 L 41 31 L 42 31 L 42 30 L 42 24 L 42 23 L 41 23 L 19 23 L 18 23 z M 20 25 L 40 25 L 40 29 L 20 29 L 20 25 z M 8 26 L 8 28 L 16 28 L 16 26 L 8 26 z M 18 35 L 18 36 L 18 40 L 18 41 L 19 41 L 23 41 L 24 41 L 24 40 L 24 36 L 24 35 L 23 35 L 19 35 L 18 35 z M 20 37 L 22 37 L 22 39 L 20 39 L 20 37 z M 26 37 L 26 39 L 42 39 L 42 37 L 26 37 z",fill:"#1e72bd"})):(0,e.createElement)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"256.000000pt",height:"256.000000pt",viewBox:"0 0 256.000000 256.000000",preserveAspectRatio:"xMidYMid meet"},(0,e.createElement)("g",{transform:"translate(0.000000,256.000000) scale(0.100000,-0.100000)",fill:"#9b51e0",stroke:"none"},(0,e.createElement)("path",{d:"M0 1280 l0 -1280 1280 0 1280 0 0 1280 0 1280 -1280 0 -1280 0 0 -1280z m1456 666 c29 -7 78 -28 111 -45 67 -36 183 -146 168 -160 -26 -23 -319 -231 -326 -231 -5 0 -9 5 -9 10 0 6 -11 22 -25 35 -30 31 -83 33 -116 6 -22 -18 -24 -27 -27 -140 l-4 -121 66 0 66 0 0 -185 0 -185 -65 0 -65 0 0 -170 0 -170 -205 0 -205 0 0 448 c0 355 3 461 15 517 39 186 182 342 356 389 69 19 199 20 265 2z"}))),(0,t.__)("Settings")))),(0,e.createElement)("div",{className:"formello-settings-main"},(0,l.applyFilters)("formello.dashboard.beforeSettings","",this),(0,e.createElement)(o.TabPanel,{tabs:b,initialTabName:k,onSelect:e=>(e=>{const t=(0,u.addQueryArgs)(window.location.href,{tab:e});window.history.replaceState({path:t},"",t)})(e)},(a=>{const l=a.component;return(0,e.createElement)("div",{className:"formello-tablist"},(0,e.createElement)("div",{className:"formello-settings-tab"},(0,e.createElement)(Y,null),(0,e.createElement)(l,{saveSetting:L.bind(this),saveSettingGroup:w.bind(this),settings:h,globalSettings:v,addNotice:_}),("general"===a.name||"recaptcha"===a.name||"messages"===a.name||"logging"===a.name)&&(0,e.createElement)(o.Button,{isPrimary:!0,"aria-disabled":n,isBusy:n,disabled:n,onClick:e=>(r(!0),void new(A().models.Settings)({formello:h}).save().done((()=>{_("info","Settings saved")})).always((()=>r(!1))).catch((e=>_("error",e.message,"default"))))},(0,t.__)("Save","formello"))),(0,e.createElement)(d,null))})),(0,l.applyFilters)("formello.dashboard.settings","",this),(0,l.applyFilters)("formello.dashboard.afterSettings","",this))):(0,e.createElement)(o.Placeholder,{className:"formello-settings-placeholder"},(0,e.createElement)(o.Spinner,null))}window.addEventListener("DOMContentLoaded",(()=>{(0,e.render)((0,e.createElement)(q,null),document.getElementById("formello-block-default-settings"))}))}()}();