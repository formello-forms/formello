!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{getTemplateData:function(){return B},getTemplates:function(){return N}});var l={};e.r(l),e.d(l,{apiFetch:function(){return A},setTemplateData:function(){return O},setTemplates:function(){return P}});var n={};e.r(n),e.d(n,{API_FETCH:function(){return x}});var a={};e.r(a),e.d(a,{getTemplateData:function(){return F},getTemplates:function(){return D}});var r=window.wp.element,s=window.wp.i18n,o=window.wp.components,i=window.wp.hooks;const c=wp.element.createElement;var m=window.wp.data,u=window.wp.notices,d=window.wp.url;function p(){return(0,r.createElement)("div",{className:"formello-help"},(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Need help?","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)("p",null,(0,s.__)("Detailed documentation is available on the plugin website.","formello")),(0,r.createElement)(o.Button,{isSecondary:!0,href:"https://docs.formello.net",target:"_blank"},(0,s.__)("Documentation","formello")),(0,r.createElement)("p",null,(0,s.__)("We would love to help you out if you need any help.","formello")),(0,r.createElement)(o.Button,{isSecondary:!0,target:"_blank",href:"https://wordpress.org/support/plugin/formello/"},(0,s.__)("Ask a question","formello")))),(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Do you like the plugin?","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)("p",null,(0,s.__)("If you like the plugin you can share a review to help us and spread some love!","formello")),(0,r.createElement)(o.Button,{isPrimary:!0,target:"_blank",className:"formello-ratings",href:"https://wordpress.org/support/plugin/formello/reviews/#new-post"},(0,s.__)("Rate","formello"),(0,r.createElement)(o.Icon,{icon:"star-filled"}),(0,r.createElement)(o.Icon,{icon:"star-filled"}),(0,r.createElement)(o.Icon,{icon:"star-filled"}),(0,r.createElement)(o.Icon,{icon:"star-filled"}),(0,r.createElement)(o.Icon,{icon:"star-filled"})))))}var g=window.wp.apiFetch,f=e.n(g);function h(e){const{showMessage:t}=e,l=(0,m.useSelect)((e=>e("formello/data").getSettings()),[]),[n,a]=(0,r.useState)(!1),i=(0,r.useRef)();return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("License","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)(o.ExternalLink,{href:"https://formello.net"},(0,s.__)("Get a FREE API Key")),(0,r.createElement)(r.RawHTML,null,(0,s.sprintf)(
/* translators: Addon license. */
(0,s.__)("<p>Your %s key provides access to addons. You can still using Formello without a license key.</p>","formello"),"<strong>free license</strong>")),(0,r.createElement)(o.__experimentalInputControl,{type:"password",autoComplete:"new-password",label:(0,s.__)("License Key","formello"),value:l.license,onChange:e=>{(0,m.dispatch)("formello/data").setSetting("license",e)},readOnly:"valid"===l.license_status,suffix:(0,r.createElement)(o.Button,{onClick:()=>(()=>{const e="valid"!==l.license_status?"activate":"deactivate";a(!0),f()({path:"/formello/v1/license/"+e,method:"POST",data:{license:l.license}}).then((e=>{a(!1),(0,m.dispatch)("formello/data").setSetting("license_status",e.response.license),t("License "+e.response.license,"success",i),e.success&&e.response&&e.response.success||t("License "+e.response.license,"error",i)}))})(),isPrimary:"valid"!==l.license_status,isSecondary:"valid"===l.license_status,"aria-disabled":n,isBusy:n},"valid"!==l.license_status?"Activate":"Deactivate")}),(0,r.createElement)("div",null,(0,r.createElement)(r.RawHTML,null,(0,s.sprintf)(
/* translators: License status. */
(0,s.__)('<p class="success">License status: %s.</p>',"formello"),`<strong>${l.license_status}</strong>`)),(0,r.createElement)("span",{ref:i,className:"formello-action-message"})))))}function E(){const e=(0,m.useSelect)((e=>e("formello/data").getSettings()),[]);return(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Google reCaptcha","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)(o.RadioControl,{selected:e.reCaptcha.version,options:[{label:"reCaptcha v2 checkbox",value:"1"},{label:"reCaptcha v3 invisible",value:"3"}],onChange:e=>{(0,m.dispatch)("formello/data").setSettingGroup("reCaptcha","version",e)}}),(0,r.createElement)(o.TextControl,{label:(0,s.__)("Site Key","formello"),value:e.reCaptcha.site_key,onChange:e=>{(0,m.dispatch)("formello/data").setSettingGroup("reCaptcha","site_key",e)}}),(0,r.createElement)(o.TextControl,{label:(0,s.__)("Secret Key","formello"),value:e.reCaptcha.secret_key,onChange:e=>{(0,m.dispatch)("formello/data").setSettingGroup("reCaptcha","secret_key",e)}}),3===Number(e.reCaptcha.version)&&(0,r.createElement)(o.__experimentalNumberControl,{label:(0,s.__)("Threshold","formello"),value:e.reCaptcha.threshold,onChange:e=>{(0,m.dispatch)("formello/data").setSettingGroup("reCaptcha","threshold",e)},step:"0.1",min:"0",max:"1"})))}function _(){const e=(0,m.useSelect)((e=>e("formello/data").getSettings()),[]),t=(t,l,n)=>{const a=Object.assign({},e.messages[t]);a[l]=n,(0,m.dispatch)("formello/data").setSettingGroup("messages",t,a)},l=Object.keys(e.messages.missingValue),n=Object.keys(e.messages.patternMismatch),a=Object.keys(e.messages.outOfRange),i=Object.keys(e.messages.wrongLength);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Missing value","formello"))),(0,r.createElement)(o.CardBody,null,l.map(((l,n)=>(0,r.createElement)(r.Fragment,{key:n},(0,r.createElement)(o.TextControl,{label:l,value:e.messages.missingValue[l],onChange:e=>{t("missingValue",l,e)}})))))),(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Pattern mismatch","formello"))),(0,r.createElement)(o.CardBody,null,n.map(((l,n)=>(0,r.createElement)(o.TextControl,{key:n,label:l,value:e.messages.patternMismatch[l],onChange:e=>{t("patternMismatch",l,e)}}))))),(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Out of range","formello"))),(0,r.createElement)(o.CardBody,null,a.map(((l,n)=>(0,r.createElement)(o.TextControl,{key:n,label:l,value:e.messages.outOfRange[l],onChange:e=>{t("outOfRange",l,e)}}))))),(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Wrong length","formello"))),(0,r.createElement)(o.CardBody,null,i.map(((l,n)=>(0,r.createElement)(o.TextControl,{key:n,label:l,value:e.messages.wrongLength[l],onChange:e=>{t("wrongLength",l,e)}}))))))}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},y.apply(this,arguments)}var v=window.wp.api,L=e.n(v);function S(e){const{title:t,addonSettings:l,optionName:n,name:a,showMessage:i,addNotice:c,icon:m}=e,[u,d]=(0,r.useState)(!1),[p,g]=(0,r.useState)(l),h=(0,r.useRef)(),E=m;return(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,{size:"large",justify:"flex-start"},(0,r.createElement)(E,null),(0,r.createElement)("h2",null,t)),(0,r.createElement)(o.CardBody,null,(0,r.createElement)(o.BaseControl,null,(0,r.createElement)(o.__experimentalInputControl,{label:(0,s.__)("Api Key","formello-mailchimp"),value:p.api_key,onChange:e=>{var t;t=e,g({...p,api_key:t})},type:"password",suffix:(0,r.createElement)(o.Button,{onClick:()=>(d(!0),void f()({path:"/formello/v1/"+a+"/list",method:"POST"}).then((e=>{d(!1),e.length||i("Are you sure it's correct?","error",h),i("Good!","success",h)}),(()=>{d(!1),i("Please insert a valid api key.","error",h)}))),isSecondary:!0,"aria-disabled":u,isBusy:u},(0,s.__)("Check","formello"))}),(0,r.createElement)("span",{ref:h,className:"formello-action-message"})),(0,r.createElement)(o.Button,{onClick:()=>(d(!0),void new(L().models.Settings)({[n]:p}).save().done((()=>{c("success",(0,s.__)("Settings saved","formello"))})).always((()=>d(!1))).catch((e=>i(e.message,"error")))),isPrimary:!0,"aria-disabled":u,isBusy:u},"Save")))}var C=(0,o.withFilters)("formello.settings")((e=>{const t=(0,m.useSelect)((e=>e("formello/data").getGlobalSettings()),[]),l=[],n=[];(0,i.applyFilters)("formello.AddonIntegration","",l);for(const a in l){const s=l[a].title,o=l[a].name,i=l[a].icon,c="formello_"+o;n.push((0,r.createElement)(S,y({},e,{key:s,icon:i,title:s,name:o,optionName:c,addonSettings:t[c]})))}return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Integrations","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)(r.RawHTML,null,(0,s.sprintf)(
/* translators: Link to addons. */
(0,s.__)("<p>Go to %s to download your preferred integrations. We are working on other integrations.</p>","formello"),'<a href="https://formello.net/addons/" target="_blank">addons page</a>')))),n)})),w=()=>{const e=(0,m.useSelect)((e=>e("formello/data").getSettings()),[]);return(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Logging","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)("p",null,(0,s.__)("To enable logging, please set this as checked.","formello")),(0,r.createElement)(o.ToggleControl,{label:(0,s.__)("Enable log","formello"),checked:e.log,onChange:e=>{(0,m.dispatch)("formello/data").setSetting("log",e)}}),e.log&&(0,r.createElement)(o.ExternalLink,{href:"/wp-content/uploads/formello/logs/"+e.log_file},(0,s.__)("View log","formello"))))};function b(e){const{title:t,addonSettings:l,optionName:n,name:a,showMessage:i,addNotice:c,icon:m}=e,[u,d]=(0,r.useState)(!1),[p,g]=(0,r.useState)(l),h=(0,r.useRef)(),E=m,_=(e,t)=>{g({...p,[e]:t})};return(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,{size:"large",justify:"flex-start"},(0,r.createElement)(E,null),(0,r.createElement)("h2",null,t)),(0,r.createElement)(o.CardBody,null,(0,r.createElement)(o.BaseControl,null,(0,r.createElement)(o.__experimentalInputControl,{label:(0,s.__)("License Key","formello-mailchimp"),value:p.license,onChange:e=>{_("license",e)},type:"password",readOnly:"valid"===p.license_status,suffix:(0,r.createElement)(o.Button,{onClick:()=>(()=>{const e="valid"!==p.license_status?"activate":"deactivate";d(!0),f()({path:"/formello/v1/license/"+e,method:"POST",data:{license:p.license,item_name:t}}).then((e=>{d(!1),_("license_status",e.response.license),e.response.success&&i("License: "+e.response.license,"success",h),e.success&&e.response&&e.response.success||i("License: "+e.response,"error",h)}),(e=>{i("License: "+e.message,"error",h)}))})(),isPrimary:"valid"!==p.license_status,isSecondary:"valid"===p.license_status,"aria-disabled":u,isBusy:u},"valid"!==p.license_status?"Activate":"Deactivate")}),(0,r.createElement)("span",{ref:h,className:"formello-action-message"})),(0,r.createElement)(o.Button,{onClick:()=>(d(!0),void new(L().models.Settings)({[n]:p}).save().done((()=>{c("success",(0,s.__)("Settings saved","formello"))})).always((()=>d(!1))).catch((e=>i(e.message,"error")))),isPrimary:!0,"aria-disabled":u,isBusy:u},"Save")))}var T=(0,o.withFilters)("formello.licenses")((e=>{const t=(0,m.useSelect)((e=>e("formello/data").getGlobalSettings())),l=[],n=[];(0,i.applyFilters)("formello.AddonsLicenses","",l);for(const a in l){const s=l[a].title,o=l[a].name,i=l[a].icon,c="formello_"+o;n.push((0,r.createElement)(b,y({},e,{key:s,icon:i,title:s,name:o,optionName:c,addonSettings:t[c]})))}return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.Card,null,(0,r.createElement)(o.CardHeader,null,(0,r.createElement)("h2",null,(0,s.__)("Licenses","formello"))),(0,r.createElement)(o.CardBody,null,(0,r.createElement)(r.RawHTML,null,(0,s.sprintf)(
/* translators: Addon licenses link. */
(0,s.__)("<p>Here you can add license for %s.</p><p>To get your licenses key go to your %s.</p>","formello"),'<a href="https://formello.net/addons/" target="_blank">addons</a>','<a href="https://formello.net/account/" target="_blank">account</a>')))),n)})),k=window.lodash;function M(){const{removeNotice:e}=(0,m.useDispatch)(u.store),t=(0,m.useSelect)((e=>e(u.store).getNotices()),[]),l=(0,k.filter)(t,{isDismissible:!0,type:"default"}),n=(0,k.filter)(t,{isDismissible:!1,type:"default"}),a=(0,k.filter)(t,{type:"snackbar"});return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.NoticeList,{notices:n,className:"formello-notices__notice-list"}),(0,r.createElement)(o.NoticeList,{notices:l,className:"formello-notices__notice-list",onRemove:e}),(0,r.createElement)(o.SnackbarList,{notices:a,className:"formello-notices__snackbar-list",onRemove:e}))}function N(e){return e.templates}function B(e,t){return e.templatesData[t]}function A(e){return{type:"API_FETCH",request:e}}function P(e){return{type:"SET_TEMPLATES",templates:e}}function O(e){return{type:"SET_TEMPLATE_DATA",data:e}}function x(e){let{request:t}=e;return f()(t).then((e=>!!(e&&e.success&&e.response)&&e.response))}function*D(){return P(yield A({path:"/formello/v1/get_templates/"}))}function*F(e){const t=`/formello/v1/get_template_data/?id=${e}`,l=yield A({path:t});return l.id||(l.id=e),O(l)}(0,m.registerStore)("formello/templates",{reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{templates:!1,templatesData:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEMPLATES":!e.templates&&t.templates&&(e.templates=t.templates);break;case"SET_TEMPLATE_DATA":t.templatesData&&t.templatesData.id&&!e.templatesData[t.templatesData.id]&&(e.templatesData[t.templatesData.id]=t.templatesData)}return e},selectors:t,actions:l,controls:n,resolvers:a});const I={settings:{},loaded:!1},G=(0,m.createReduxStore)("formello/data",{reducer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SETTING_GROUP":return{...e,settings:{...e.settings,formello:{...e.settings.formello,[t.group]:{...e.settings.formello[t.group],[t.key]:t.value}}}};case"SET_SETTINGS":return{...e,settings:t.settings};case"SET_SETTING":return{...e,settings:{...e.settings,formello:{...e.settings.formello,[t.key]:t.value}}}}return e},actions:{setSettings:e=>({type:"SET_SETTINGS",settings:e}),setSetting:(e,t)=>({type:"SET_SETTING",key:e,value:t}),setSettingGroup:(e,t,l)=>({type:"SET_SETTING_GROUP",group:e,key:t,value:l}),setLoaded:e=>({type:"SET_LOADED",val:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e})},selectors:{getGlobalSettings(e){const{settings:t}=e;return t},getSettings(e){const{settings:t}=e;return t.formello}},controls:{FETCH_FROM_API:e=>f()({path:e.path})}});function H(){const[e,t]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),{createNotice:a,removeNotice:g}=(0,m.useDispatch)(u.store),f=(0,m.useSelect)((e=>e("formello/data").getSettings()));(0,r.useEffect)((()=>{L().loadPromise.then((()=>{const e=new(L().models.Settings);!1===l&&e.fetch().then((e=>{(0,m.dispatch)("formello/data").setSettings(e),n(!0)}))}))}),[]);const y=[{name:"general",title:"General",component:h},{name:"recaptcha",title:"ReCaptcha",component:E},{name:"messages",title:"Messages",component:_},{name:"integrations",title:"Integrations",component:C},{name:"licenses",title:"Licenses",component:T},{name:"logging",title:"Logging",component:w}],v=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"snackbar";g("settings"),a(e,t,{type:l,id:"settings"})},S=(0,d.getQueryArg)(window.location.href,"tab"),b=(e,t,l)=>{const n=l.current;n.classList.add("formello-action-message--show"),n.classList.remove("formello-action-message--error"),"error"===t&&n.classList.add("formello-action-message--error"),n.textContent=e,setTimeout((function(){n.classList.remove("formello-action-message--show")}),3e3)};return l?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"formello-settings-header"},(0,r.createElement)("div",{className:"formello-container"},(0,r.createElement)("h1",null,"form"=="logo"?c("svg",{width:50,height:50,viewBox:"0 0 50 50",style:{padding:"1px"}},c("path",{d:"M 2.8125 2 A 1.0001 1.0001 0 0 0 2 3 L 2 47 A 1.0001 1.0001 0 0 0 3 48 L 47 48 A 1.0001 1.0001 0 0 0 48 47 L 48 3 A 1.0001 1.0001 0 0 0 47 2 L 3 2 A 1.0001 1.0001 0 0 0 2.90625 2 A 1.0001 1.0001 0 0 0 2.8125 2 z M 4 4 L 46 4 L 46 46 L 4 46 L 4 4 z M 18 11 L 18 12 L 18 18 L 18 19 L 19 19 L 41 19 L 42 19 L 42 18 L 42 12 L 42 11 L 41 11 L 19 11 L 18 11 z M 20 13 L 40 13 L 40 17 L 20 17 L 20 13 z M 8 14 L 8 16 L 16 16 L 16 14 L 8 14 z M 18 23 L 18 24 L 18 30 L 18 31 L 19 31 L 41 31 L 42 31 L 42 30 L 42 24 L 42 23 L 41 23 L 19 23 L 18 23 z M 20 25 L 40 25 L 40 29 L 20 29 L 20 25 z M 8 26 L 8 28 L 16 28 L 16 26 L 8 26 z M 18 35 L 18 36 L 18 40 L 18 41 L 19 41 L 23 41 L 24 41 L 24 40 L 24 36 L 24 35 L 23 35 L 19 35 L 18 35 z M 20 37 L 22 37 L 22 39 L 20 39 L 20 37 z M 26 37 L 26 39 L 42 39 L 42 37 L 26 37 z",fill:"#1e72bd"})):(0,r.createElement)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"256.000000pt",height:"256.000000pt",viewBox:"0 0 256.000000 256.000000",preserveAspectRatio:"xMidYMid meet"},(0,r.createElement)("g",{transform:"translate(0.000000,256.000000) scale(0.100000,-0.100000)",fill:"#9b51e0",stroke:"none"},(0,r.createElement)("path",{d:"M0 1280 l0 -1280 1280 0 1280 0 0 1280 0 1280 -1280 0 -1280 0 0 -1280z m1456 666 c29 -7 78 -28 111 -45 67 -36 183 -146 168 -160 -26 -23 -319 -231 -326 -231 -5 0 -9 5 -9 10 0 6 -11 22 -25 35 -30 31 -83 33 -116 6 -22 -18 -24 -27 -27 -140 l-4 -121 66 0 66 0 0 -185 0 -185 -65 0 -65 0 0 -170 0 -170 -205 0 -205 0 0 448 c0 355 3 461 15 517 39 186 182 342 356 389 69 19 199 20 265 2z"}))),(0,s.__)("Settings")))),(0,r.createElement)("div",{className:"formello-settings-main"},(0,i.applyFilters)("formello.dashboard.beforeSettings","",this),(0,r.createElement)(o.TabPanel,{tabs:y,initialTabName:S,onSelect:e=>(e=>{const t=(0,d.addQueryArgs)(window.location.href,{tab:e});window.history.replaceState({path:t},"",t)})(e)},(l=>{const n=l.component;return(0,r.createElement)("div",{className:"formello-tablist"},(0,r.createElement)("div",{className:"formello-settings-tab"},(0,r.createElement)(M,null),(0,r.createElement)(n,{addNotice:v,showMessage:b}),("general"===l.name||"recaptcha"===l.name||"messages"===l.name||"logging"===l.name)&&(0,r.createElement)(o.Button,{isPrimary:!0,"aria-disabled":e,isBusy:e,disabled:e,onClick:()=>(t(!0),void new(L().models.Settings)({formello:f}).save().done((()=>{v("info","Settings saved")})).always((()=>t(!1))).catch((e=>v("error",e.message,"default"))))},(0,s.__)("Save","formello"))),(0,r.createElement)(p,null))})),(0,i.applyFilters)("formello.dashboard.settings","",this),(0,i.applyFilters)("formello.dashboard.afterSettings","",this))):(0,r.createElement)(o.Placeholder,{className:"formello-settings-placeholder"},(0,r.createElement)(o.Spinner,null))}(0,m.register)(G),window.addEventListener("DOMContentLoaded",(()=>{(0,r.render)((0,r.createElement)(H,null),document.getElementById("formello-block-default-settings"))}))}();