!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,l=window.wp.i18n,n=window.wp.components,a=window.wp.apiFetch,r=e.n(a),o=window.wp.hooks;const s=wp.element.createElement;var i=window.wp.data,c=window.wp.notices,m=window.wp.url;function u(){return(0,t.createElement)("div",{className:"formello-help"},(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Need help?","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)("p",null,(0,l.__)("Detailed documentation is available on the plugin website.","formello")),(0,t.createElement)(n.Button,{isSecondary:!0,target:"_blank",href:"https://docs.formello.net"},(0,l.__)("Documentation","formello")),(0,t.createElement)("p",null,(0,l.__)("We would love to help you out if you need any help.","formello")),(0,t.createElement)(n.Button,{isSecondary:!0,target:"_blank",href:"https://wordpress.org/support/plugin/formello/"},(0,l.__)("Ask a question","formello")))),(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Do you like the plugin?","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)("p",null,(0,l.__)("If you like the plugin you can share a review to help us and spread some love!","formello")),(0,t.createElement)(n.Button,{isPrimary:!0,target:"_blank",className:"formello-ratings",href:"https://wordpress.org/support/plugin/formello/reviews/#new-post"},(0,l.__)("Rate","formello"),(0,t.createElement)(n.Icon,{icon:"star-filled"}),(0,t.createElement)(n.Icon,{icon:"star-filled"}),(0,t.createElement)(n.Icon,{icon:"star-filled"}),(0,t.createElement)(n.Icon,{icon:"star-filled"}),(0,t.createElement)(n.Icon,{icon:"star-filled"})))))}var d=(0,n.withFilters)("formello.settings")((()=>(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Integrations","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(t.RawHTML,null,(0,l.sprintf)(
/* translators: Link to addons. */
(0,l.__)("<p>Go to %s to download your preferred integrations. We are working on other integrations.</p>","formello"),'<a href="https://formello.net/addons/" target="_blank">addons page</a>'))))));function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},g.apply(this,arguments)}function h(e){const{title:a,license:o,saveSettingGroup:s}=e;return(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,a)),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.BaseControl,null,(0,t.createElement)(n.__experimentalInputControl,{label:(0,l.__)("License Key","formello-mailchimp"),value:o,onChange:e=>{s("addon_licenses",a,e)},suffix:(0,t.createElement)(n.Button,{isSmall:!0,onClick:(e,t,n)=>{r()({path:"/formello/v1/license/activate",method:"POST",data:{license:o}}).then((e=>{addNotice("info",(0,l.__)("Api Key valid","formello"))}),(e=>{addNotice("error",e.message)}))},icon:"admin-generic"})}))))}var p=(0,n.withFilters)("formello.licenses")((e=>{const{getSetting:a}=e,r=a("addon_licenses"),o=[];for(const l in r)o.push((0,t.createElement)(h,g({},e,{key:l,title:l,license:r[l]})));return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Licenses","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(t.RawHTML,null,(0,l.sprintf)(
/* translators: Addon licenses link. */
(0,l.__)("<p>Here you can add license for %s.</p><p>To get your licenses key go to your %s.</p>","formello"),'<a href="https://formello.net/addons/" target="_blank">addons</a>','<a href="https://formello.net/account/" target="_blank">account</a>')))),o)})),f=window.lodash;function E(){const{removeNotice:e}=(0,i.useDispatch)(c.store),l=(0,i.useSelect)((e=>e(c.store).getNotices()),[]),a=(0,f.filter)(l,{isDismissible:!0,type:"default"}),r=(0,f.filter)(l,{isDismissible:!1,type:"default"}),o=(0,f.filter)(l,{type:"snackbar"});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.NoticeList,{notices:r,className:"formello-notices__notice-list"}),(0,t.createElement)(n.NoticeList,{notices:a,className:"formello-notices__notice-list",onRemove:e}),(0,t.createElement)(n.SnackbarList,{notices:o,className:"formello-notices__snackbar-list",onRemove:e}))}var _=window.wp.api,C=e.n(_);const v={general:function(e){const{getSetting:a,saveSetting:o}=e,[s,i]=(0,t.useState)(!1),[c,m]=(0,t.useState)(a("license_status")),u=(e,t)=>{const l=t.target.nextElementSibling;i(!0),r()({path:"/formello/v1/license/"+e,method:"POST",data:{license:a("license")}}).then((e=>{i(!1),e.response.success&&(o("license_status",e.response.license),m(e.response.license)),l.classList.add("formello-action-message--show"),l.classList.remove("formello-action-message--error"),l.textContent="License "+e.response.license,e.success&&e.response&&e.response.success||(l.textContent="License: "+e.response,l.classList.add("formello-action-message--error")),setTimeout((function(){l.classList.remove("formello-action-message--show")}),3e3)}))};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("License","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.ExternalLink,{href:"https://formello.net"},(0,l.__)("Get a FREE API Key")),(0,t.createElement)(t.RawHTML,null,(0,l.sprintf)(
/* translators: Addon license. */
(0,l.__)("<p>Your %s key provides access to addons. You can still using Formello without a license key.</p>","formello"),"<strong>free license</strong>")),(0,t.createElement)(n.__experimentalInputControl,{type:"password",autoComplete:"new-password",label:(0,l.__)("License Key","formello"),value:a("license"),onChange:e=>{o("license",e)},readOnly:"valid"===a("license_status")}),(0,t.createElement)("div",null,"valid"===c?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(t.RawHTML,null,(0,l.sprintf)(
/* translators: License status. */
(0,l.__)('<p class="success">License status: %s.</p>',"formello"),"<strong>active</strong>")),(0,t.createElement)(n.Button,{onClick:e=>u("deactivate",e),isSecondary:!0,"aria-disabled":s,isBusy:s},"Deactivate")):(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.Button,{onClick:e=>u("activate",e),"aria-disabled":s,isPrimary:!0,isBusy:s},"Activate")),(0,t.createElement)("span",{className:"formello-action-message"})))))},licenses:p,recaptcha:function(e){const{getSetting:a,saveSettingGroup:r}=e;return(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Google reCaptcha","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.RadioControl,{selected:a("reCaptcha","version"),options:[{label:"reCaptcha v2 checkbox",value:"1"},{label:"reCaptcha v3 invisible",value:"3"}],onChange:e=>{r("reCaptcha","version",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Site Key","formello"),value:a("reCaptcha","site_key"),onChange:e=>{r("reCaptcha","site_key",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Secret Key","formello"),value:a("reCaptcha","secret_key"),onChange:e=>{r("reCaptcha","secret_key",e)}}),3===a("reCaptcha","version")&&(0,t.createElement)(n.__experimentalNumberControl,{label:(0,l.__)("Threshold","formello"),value:a("reCaptcha","threshold"),onChange:e=>{r("reCaptcha","threshold",e)},step:"0.1",min:"0",max:"1"})))},messages:function(e){const{getSetting:a,saveSettingGroup:r}=e,o=(e,t,l)=>{const n=Object.assign({},a("messages",e));n[t]=l,r("messages",e,n)};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Missing value","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.TextControl,{label:(0,l.__)("Default"),value:a("messages","missingValue").default,onChange:e=>{o("missingValue","default",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Checkbox"),value:a("messages","missingValue").checkbox,onChange:e=>{o("missingValue","checkbox",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Radio"),value:a("messages","missingValue").radio,onChange:e=>{o("missingValue","radio",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Select"),value:a("messages","missingValue").select,onChange:e=>{o("missingValue","select",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Select Multiple"),value:a("messages","missingValue")["select-multiple"],onChange:e=>{o("missingValue",["select-multiple"],e)}}))),(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Pattern mismatch","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.TextControl,{label:(0,l.__)("Email"),value:a("messages","patternMismatch").email,onChange:e=>{o("patternMismatch","email",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Url"),value:a("messages","patternMismatch").url,onChange:e=>{o("patternMismatch","url",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Number","formello"),value:a("messages","patternMismatch").number,onChange:e=>{o("patternMismatch","number",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Color","formello"),value:a("messages","patternMismatch").color,onChange:e=>{o("patternMismatch","color",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Date","formello"),value:a("messages","patternMismatch").date,onChange:e=>{o("patternMismatch","date",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Time","formello"),value:a("messages","patternMismatch").time,onChange:e=>{o("patternMismatch","time",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Month","formello"),value:a("messages","patternMismatch").month,onChange:e=>{o("patternMismatch","month",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Default","formello"),value:a("messages","patternMismatch").default,onChange:e=>{o("patternMismatch","default",e)}}))),(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Out of range","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.TextControl,{label:(0,l.__)("Over Range","formello"),value:a("messages","outOfRange").over,onChange:e=>{o("outOfRange","over",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Under Range","formello"),value:a("messages","outOfRange").under,onChange:e=>{o("outOfRange","under",e)}}))),(0,t.createElement)(n.Card,null,(0,t.createElement)(n.CardHeader,null,(0,t.createElement)("h2",null,(0,l.__)("Wrong length","formello"))),(0,t.createElement)(n.CardBody,null,(0,t.createElement)(n.TextControl,{label:(0,l.__)("Over Length","formello"),value:a("messages","wrongLength").over,onChange:e=>{o("wrongLength","over",e)}}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Under Length","formello"),value:a("messages","wrongLength").under,onChange:e=>{o("wrongLength","under",e)}}))))},integrations:d};function L(){const[e,a]=(0,t.useState)(!1),[d,g]=(0,t.useState)(!1),[h,p]=(0,t.useState)(),{createNotice:f,removeNotice:_}=(0,i.useDispatch)(c.store),L=(e,t)=>{a(!0);let l={...h,[e]:t};p(l),new(C().models.Settings)({formello:l}).save().done((()=>{w("info","Settings saved")})).always((()=>a(!1)))};(0,t.useEffect)((()=>{C().loadPromise.then((()=>{let e=new(C().models.Settings);!1===d&&e.fetch().then((e=>{p(e.formello),g(!0)}))}))}),[]);const w=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"snackbar";_("settings"),f(e,t,{type:l,id:"settings"})},b=(e,t,l)=>{let n=l;return t||(n=h[e]),void 0!==h[e][t]&&(n=h[e][t]),n},y=(e,t,l)=>{p({...h,[e]:{...h[e],[t]:l}})},S=(0,m.getQueryArg)(window.location.href,"tab");return d?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"formello-settings-header"},(0,t.createElement)("div",{className:"formello-container"},(0,t.createElement)("h1",null,"form"=="logo"?s("svg",{width:50,height:50,viewBox:"0 0 50 50",style:{padding:"1px"}},s("path",{d:"M 2.8125 2 A 1.0001 1.0001 0 0 0 2 3 L 2 47 A 1.0001 1.0001 0 0 0 3 48 L 47 48 A 1.0001 1.0001 0 0 0 48 47 L 48 3 A 1.0001 1.0001 0 0 0 47 2 L 3 2 A 1.0001 1.0001 0 0 0 2.90625 2 A 1.0001 1.0001 0 0 0 2.8125 2 z M 4 4 L 46 4 L 46 46 L 4 46 L 4 4 z M 18 11 L 18 12 L 18 18 L 18 19 L 19 19 L 41 19 L 42 19 L 42 18 L 42 12 L 42 11 L 41 11 L 19 11 L 18 11 z M 20 13 L 40 13 L 40 17 L 20 17 L 20 13 z M 8 14 L 8 16 L 16 16 L 16 14 L 8 14 z M 18 23 L 18 24 L 18 30 L 18 31 L 19 31 L 41 31 L 42 31 L 42 30 L 42 24 L 42 23 L 41 23 L 19 23 L 18 23 z M 20 25 L 40 25 L 40 29 L 20 29 L 20 25 z M 8 26 L 8 28 L 16 28 L 16 26 L 8 26 z M 18 35 L 18 36 L 18 40 L 18 41 L 19 41 L 23 41 L 24 41 L 24 40 L 24 36 L 24 35 L 23 35 L 19 35 L 18 35 z M 20 37 L 22 37 L 22 39 L 20 39 L 20 37 z M 26 37 L 26 39 L 42 39 L 42 37 L 26 37 z",fill:"#1e72bd"})):(0,t.createElement)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"256.000000pt",height:"256.000000pt",viewBox:"0 0 256.000000 256.000000",preserveAspectRatio:"xMidYMid meet"},(0,t.createElement)("g",{transform:"translate(0.000000,256.000000) scale(0.100000,-0.100000)",fill:"#9b51e0",stroke:"none"},(0,t.createElement)("path",{d:"M0 1280 l0 -1280 1280 0 1280 0 0 1280 0 1280 -1280 0 -1280 0 0 -1280z m1456 666 c29 -7 78 -28 111 -45 67 -36 183 -146 168 -160 -26 -23 -319 -231 -326 -231 -5 0 -9 5 -9 10 0 6 -11 22 -25 35 -30 31 -83 33 -116 6 -22 -18 -24 -27 -27 -140 l-4 -121 66 0 66 0 0 -185 0 -185 -65 0 -65 0 0 -170 0 -170 -205 0 -205 0 0 448 c0 355 3 461 15 517 39 186 182 342 356 389 69 19 199 20 265 2z"}))),(0,l.__)("Settings")))),(0,t.createElement)("div",{className:"formello-settings-main"},(0,o.applyFilters)("formello.dashboard.beforeSettings","",this),(0,t.createElement)(n.TabPanel,{tabs:[{name:"general",title:"General"},{name:"recaptcha",title:"ReCaptcha"},{name:"messages",title:"Messages"},{name:"integrations",title:"Integrations"}],initialTabName:S,onSelect:e=>(e=>{const t=(0,m.addQueryArgs)(window.location.href,{tab:e});window.history.replaceState({path:t},"",t)})(e)},(o=>{const s=v[o.name];return(0,t.createElement)("div",{className:"formello-tablist"},(0,t.createElement)("div",{className:"formello-settings-tab"},(0,t.createElement)(E,null),(0,t.createElement)(s,{saveSetting:L.bind(this),saveSettingGroup:y.bind(this),getSetting:b.bind(this),addNotice:w}),(0,t.createElement)(n.Button,{isPrimary:!0,"aria-disabled":e,isBusy:e,disabled:e,onClick:e=>(a(!0),void r()({path:"/formello/v1/settings",method:"POST",data:{settings:h}}).then((()=>{a(!1),w("error","Settings saved")})))},(0,l.__)("Save","formello"))),(0,t.createElement)(u,null))})),(0,o.applyFilters)("formello.dashboard.settings","",this),(0,o.applyFilters)("formello.dashboard.afterSettings","",this))):(0,t.createElement)(n.Placeholder,{className:"formello-settings-placeholder"},(0,t.createElement)(n.Spinner,null))}window.addEventListener("DOMContentLoaded",(()=>{(0,t.render)((0,t.createElement)(L,null),document.getElementById("formello-block-default-settings"))}))}();