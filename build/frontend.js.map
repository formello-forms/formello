{"version":3,"file":"frontend.js","mappings":"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","sources":["webpack://formello/./src/frontend/events.js","webpack://formello/./src/frontend/form.js","webpack://formello/webpack/bootstrap","webpack://formello/webpack/runtime/define property getters","webpack://formello/webpack/runtime/hasOwnProperty shorthand","webpack://formello/webpack/runtime/make namespace object","webpack://formello/./src/frontend/frontend.js"],"sourcesContent":["const listeners = {};\n\nfunction trigger( event, args ) {\n\tlisteners[ event ] = listeners[ event ] || [];\n\tlisteners[ event ].forEach( ( f ) => f.apply( null, args ) );\n}\n\nfunction on( event, func ) {\n\tlisteners[ event ] = listeners[ event ] || [];\n\tlisteners[ event ].push( func );\n}\n\nfunction off( event, func ) {\n\tlisteners[ event ] = listeners[ event ] || [];\n\tlisteners[ event ] = listeners[ event ].filter( ( f ) => f !== func );\n}\n\nexport default { trigger, on, off };\n","import events from './events.js';\n\nclass Formello {\n\tconstructor( element ) {\n\t\tthis.element = element;\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tconst { validate } = this.element.dataset;\n\n\t\tif ( validate ) {\n\t\t\tthis.enableJsValidation();\n\t\t\tthis.element.addEventListener(\n\t\t\t\t'bouncerFormValid',\n\t\t\t\tthis.handleSubmit.bind( this ),\n\t\t\t\tfalse\n\t\t\t);\n\t\t} else {\n\t\t\tthis.element.addEventListener(\n\t\t\t\t'submit',\n\t\t\t\tthis.handleSubmit.bind( this ),\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tthis.isRtfEnabled();\n\t\tthis.addFlatpickr();\n\t}\n\n\thandleSubmit( e ) {\n\t\t// prevent default, we send trough ajax\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tthis.showLoading();\n\n\t\tconst { captcha, noajax } = this.element.dataset;\n\n\t\tif ( noajax ) {\n\t\t\tthis.submitNoAjax();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! captcha ) {\n\t\t\tthis.submitForm();\n\t\t} else {\n\t\t\tthis.submitWithCaptcha( captcha );\n\t\t}\n\t}\n\n\tsubmitNoAjax() {\n\t\tthis.element.submit();\n\t}\n\n\tsubmitWithCaptcha( captchaType ) {\n\t\tif ( 'reCaptcha' === captchaType ) {\n\t\t\tconst captcha = this.element.querySelector( '.g-recaptcha' );\n\t\t\tconst { size } = captcha.dataset;\n\t\t\tif ( 'invisible' === size ) {\n\t\t\t\twindow.grecaptcha.execute().then( () => this.submitForm() );\n\t\t\t} else {\n\t\t\t\tthis.submitForm();\n\t\t\t}\n\t\t} else {\n\t\t\twindow.hcaptcha.execute().then( () => this.submitForm() );\n\t\t}\n\t}\n\n\tasync submitForm() {\n\t\tthis.cleanMessage();\n\t\tthis.emitEvent( 'submit' );\n\n\t\tconst formData = new FormData( this.element );\n\n\t\ttry {\n\t\t\tconst res = await fetch( window.formello.ajax_url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: formData,\n\t\t\t} );\n\n\t\t\tconst resData = await res.json();\n\t\t\tthis.showLoading();\n\n\t\t\tthis.response( resData );\n\t\t} catch ( err ) {\n\t\t\tthis.addMessage( { data: { message: err } } );\n\t\t}\n\t}\n\n\tresponse( res ) {\n\t\tthis.emitEvent( 'submitted', this.element );\n\n\t\tif ( res.success ) {\n\t\t\tthis.emitEvent( 'success', this.element );\n\t\t} else {\n\t\t\tthis.emitEvent( 'error', this.element );\n\t\t}\n\n\t\tconst { data } = res;\n\n\t\t// Should we redirect?\n\t\tif ( data.redirect_url && res.success ) {\n\t\t\twindow.location = data.redirect_url;\n\t\t\treturn false;\n\t\t}\n\n\t\t// Show form message\n\t\tif ( data.message ) {\n\t\t\tthis.addMessage( res );\n\t\t\tthis.emitEvent( 'message', this.element );\n\t\t}\n\n\t\t// Should we hide form?\n\t\tif ( data.hide && res.success ) {\n\t\t\tthis.element.style.display = 'none';\n\t\t}\n\n\t\tif ( data.debug ) {\n\t\t\tthis.addDebug( data.debug );\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log( data.debug );\n\t\t}\n\n\t\t// clear form\n\t\tif ( res.success ) {\n\t\t\tthis.element.reset();\n\t\t}\n\t}\n\n\taddMessage( res ) {\n\t\tconst msg = this.element.querySelector( '.formello-message' );\n\t\tconst type = res.success ? 'success' : 'error';\n\t\tmsg.classList.add( type );\n\t\tconst { data } = res;\n\t\tmsg.innerHTML = '<p>' + data.message + '</p>';\n\n\t\tif ( data.errors?.length ) {\n\t\t\tconst ul = document.createElement( 'ul' );\n\n\t\t\tmsg.appendChild( ul );\n\n\t\t\tdata.errors.forEach( function ( item ) {\n\t\t\t\tconst li = document.createElement( 'li' );\n\t\t\t\tul.appendChild( li );\n\t\t\t\tli.innerHTML += item;\n\t\t\t} );\n\t\t}\n\n\t\tif ( data.hide && res.success ) {\n\t\t\tthis.element.insertAdjacentElement( 'afterend', msg );\n\t\t}\n\t}\n\n\taddDebug( debug ) {\n\t\tconst msg = this.element.querySelector( '.formello-message' );\n\n\t\tconst debugDiv = document.createElement( 'div' );\n\t\tdebugDiv.classList.add( 'formello-debug' );\n\t\tdebugDiv.innerHTML = '<p>Debug output:</p>';\n\t\tdebugDiv.innerHTML +=\n\t\t\t'<small>This output is visible only to admin.</small>';\n\t\tdebugDiv.innerHTML +=\n\t\t\t'<pre>' + JSON.stringify( debug, undefined, 2 ) + '</pre>';\n\n\t\tmsg.insertAdjacentElement( 'afterend', debugDiv );\n\t}\n\n\tcleanMessage() {\n\t\tconst msg = this.element.querySelector( '.formello-message' );\n\t\tmsg.innerHTML = '';\n\t\tmsg.setAttribute( 'class', 'formello-message' );\n\t\tif ( msg.nextSibling ) {\n\t\t\tif ( 'formello-debug' === msg.nextSibling.className ) {\n\t\t\t\tmsg.nextSibling.remove();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowLoading() {\n\t\tconst btn = this.element.querySelector( '.wp-block-formello-button' );\n\t\tbtn.classList.toggle( 'wp-block-formello-button--loading' );\n\t\tbtn.toggleAttribute( 'disabled' );\n\t}\n\n\temitEvent( eventName ) {\n\t\t// browser event API: formElement.on('formello-success', ..)\n\t\twindow.dispatchEvent( new CustomEvent( 'formello-' + eventName ) );\n\t\tthis.element.dispatchEvent(\n\t\t\tnew CustomEvent( 'formello-' + eventName )\n\t\t);\n\n\t\t// custom events API: formello.on('success', ..)\n\t\tevents.trigger( eventName, [ this.element ] );\n\t}\n\n\tenableJsValidation() {\n\t\tconst script = document.createElement( 'script' );\n\t\tscript.src =\n\t\t\t'https://cdn.jsdelivr.net/gh/cferdinandi/bouncer@1/dist/bouncer.polyfills.min.js';\n\n\t\tconst { id } = this.element.dataset;\n\n\t\tscript.onload = function () {\n\t\t\t//do stuff with the script\n\t\t\tnew window.Bouncer( `.wp-block-formello-form[data-id='${id}']`, {\n\t\t\t\tdisableSubmit: true,\n\t\t\t\tcustomValidations: {\n\t\t\t\t\tvalueMismatch( field ) {\n\t\t\t\t\t\t// Look for a selector for a field to compare\n\t\t\t\t\t\t// If there isn't one, return false (no error)\n\t\t\t\t\t\tconst selector =\n\t\t\t\t\t\t\tfield.getAttribute( 'data-bouncer-match' );\n\t\t\t\t\t\tif ( ! selector ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get the field to compare\n\t\t\t\t\t\tconst otherField = field.form.querySelector(\n\t\t\t\t\t\t\t'[name=' + selector + ']'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( ! otherField ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Compare the two field values\n\t\t\t\t\t\t// We use a negative comparison here because if they do match, the field validates\n\t\t\t\t\t\t// We want to return true for failures, which can be confusing\n\t\t\t\t\t\treturn otherField.value !== field.value;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmessageCustom: 'data-bouncer-message', // The data attribute to use for custom error messages\n\t\t\t\tmessages: {\n\t\t\t\t\tmissingValue:\n\t\t\t\t\t\twindow.formello.settings.messages.missingValue,\n\t\t\t\t\tpatternMismatch:\n\t\t\t\t\t\twindow.formello.settings.messages.patternMismatch,\n\t\t\t\t\toutOfRange: window.formello.settings.messages.outOfRange,\n\t\t\t\t\twrongLength: window.formello.settings.messages.wrongLength,\n\t\t\t\t\tvalueMismatch( field ) {\n\t\t\t\t\t\tconst customMessage = field.getAttribute(\n\t\t\t\t\t\t\t'data-bouncer-mismatch-message'\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn customMessage\n\t\t\t\t\t\t\t? customMessage\n\t\t\t\t\t\t\t: 'Please make sure the fields match.';\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t} );\n\t\t};\n\n\t\tdocument.head.appendChild( script );\n\t}\n\n\tisRtfEnabled() {\n\t\tconst richtext = this.element.querySelectorAll( '.formello-rtf' );\n\t\tif ( richtext.length ) {\n\t\t\tconst script = document.createElement( 'script' );\n\n\t\t\tscript.onload = function () {\n\t\t\t\twindow.tinymce.init( {\n\t\t\t\t\tselector: '.formello-rtf',\n\t\t\t\t\tsetup: ( editor ) => {\n\t\t\t\t\t\teditor.on( 'change', () => {\n\t\t\t\t\t\t\twindow.tinymce.triggerSave();\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t\tmenubar: false,\n\t\t\t\t\tplugins: [\n\t\t\t\t\t\t'advlist autolink lists link image charmap print preview anchor',\n\t\t\t\t\t\t'searchreplace visualblocks code fullscreen',\n\t\t\t\t\t\t'insertdatetime media table paste code help wordcount',\n\t\t\t\t\t],\n\t\t\t\t\ttoolbar:\n\t\t\t\t\t\t'formatselect | ' +\n\t\t\t\t\t\t'bold italic underline | bullist numlist  | ' +\n\t\t\t\t\t\t'alignleft aligncenter alignright alignjustify | link unlink | undo redo',\n\t\t\t\t\tcontent_style:\n\t\t\t\t\t\t'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }',\n\t\t\t\t} );\n\t\t\t};\n\t\t\tscript.src =\n\t\t\t\t'https://cdnjs.cloudflare.com/ajax/libs/tinymce/5.10.3/tinymce.min.js';\n\n\t\t\tdocument.head.appendChild( script );\n\t\t}\n\t}\n\n\taddFlatpickr() {\n\t\tconst advancedDate = this.element.querySelectorAll(\n\t\t\t'input.formello-advanced[type=date]'\n\t\t);\n\t\tif ( advancedDate.length ) {\n\t\t\tconst script = document.createElement( 'script' );\n\t\t\tconst css = document.createElement( 'link' );\n\t\t\tcss.setAttribute( 'type', 'text/css' );\n\t\t\tcss.setAttribute(\n\t\t\t\t'href',\n\t\t\t\t'https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css'\n\t\t\t);\n\t\t\tcss.setAttribute( 'rel', 'stylesheet' );\n\n\t\t\tscript.onload = function () {\n\t\t\t\t//do stuff with the script\n\t\t\t\twindow.flatpickr( 'input.formello-advanced[type=date]' );\n\t\t\t};\n\t\t\tscript.src = 'https://cdn.jsdelivr.net/npm/flatpickr';\n\n\t\t\tdocument.head.appendChild( script );\n\t\t\tdocument.head.appendChild( css );\n\t\t}\n\t}\n}\n\nexport { Formello };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Formello } from './form';\n\ndocument.addEventListener( 'DOMContentLoaded', function () {\n\tconst forms = document.querySelectorAll( '.wp-block-formello-form' );\n\n\tif ( ! forms.length ) {\n\t\treturn;\n\t}\n\n\tforms.forEach( ( block ) => {\n\t\tnew Formello( block );\n\t} );\n} );\n"],"names":["listeners","trigger","event","args","forEach","f","apply","on","func","push","off","filter","events","Formello","constructor","element","init","validate","dataset","enableJsValidation","addEventListener","handleSubmit","bind","isRtfEnabled","addFlatpickr","e","preventDefault","stopPropagation","showLoading","captcha","noajax","submitNoAjax","submitForm","submitWithCaptcha","submit","captchaType","querySelector","size","window","grecaptcha","execute","then","hcaptcha","cleanMessage","emitEvent","formData","FormData","res","fetch","formello","ajax_url","method","body","resData","json","response","err","addMessage","data","message","success","redirect_url","location","hide","style","display","debug","addDebug","console","log","reset","msg","type","classList","add","innerHTML","errors","length","ul","document","createElement","appendChild","item","li","insertAdjacentElement","debugDiv","JSON","stringify","undefined","setAttribute","nextSibling","className","remove","btn","toggle","toggleAttribute","eventName","dispatchEvent","CustomEvent","script","src","id","onload","Bouncer","disableSubmit","customValidations","valueMismatch","field","selector","getAttribute","otherField","form","value","messageCustom","messages","missingValue","settings","patternMismatch","outOfRange","wrongLength","customMessage","head","richtext","querySelectorAll","tinymce","setup","editor","triggerSave","menubar","plugins","toolbar","content_style","advancedDate","css","flatpickr","forms","block"],"sourceRoot":""}