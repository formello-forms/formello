{"version":3,"file":"blocks/library/view.js","mappings":"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","sources":["webpack://formello/./src/blocks/library/config.js","webpack://formello/external module \"@wordpress/interactivity\"","webpack://formello/webpack/bootstrap","webpack://formello/webpack/runtime/define property getters","webpack://formello/webpack/runtime/hasOwnProperty shorthand","webpack://formello/webpack/runtime/make namespace object","webpack://formello/./src/blocks/library/view.js"],"sourcesContent":["export const config = {\n\tbouncer: {\n\t\tdisableSubmit: true,\n\t\tcustomValidations: {\n\t\t\tvalueMismatch( field ) {\n\t\t\t\t// Look for a selector for a field to compare\n\t\t\t\t// If there isn't one, return false (no error)\n\t\t\t\tconst selector = field.getAttribute( 'data-bouncer-match' );\n\t\t\t\tif ( ! selector ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Get the field to compare\n\t\t\t\tconst otherField = field.form.querySelector(\n\t\t\t\t\t'[name=' + selector + ']'\n\t\t\t\t);\n\t\t\t\tif ( ! otherField ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Compare the two field values\n\t\t\t\t// We use a negative comparison here because if they do match, the field validates\n\t\t\t\t// We want to return true for failures, which can be confusing\n\t\t\t\treturn otherField.value !== field.value;\n\t\t\t},\n\t\t},\n\t\tmessageCustom: 'data-bouncer-message', // The data attribute to use for custom error messages\n\t\tmessages: {\n\t\t\tvalueMismatch( field ) {\n\t\t\t\tconst customMessage = field.getAttribute(\n\t\t\t\t\t'data-bouncer-mismatch-message'\n\t\t\t\t);\n\t\t\t\treturn customMessage\n\t\t\t\t\t? customMessage\n\t\t\t\t\t: 'Please make sure the fields match.';\n\t\t\t},\n\t\t},\n\t},\n\ttinyMce: {\n\t\tselector: '.formello-rtf',\n\t\tsetup: ( editor ) => {\n\t\t\teditor.on( 'change', () => {\n\t\t\t\twindow.tinymce.triggerSave();\n\t\t\t} );\n\t\t},\n\t\tmenubar: false,\n\t\tplugins: [\n\t\t\t'advlist autolink lists link image charmap print preview anchor',\n\t\t\t'searchreplace visualblocks code fullscreen',\n\t\t\t'insertdatetime media table paste code help wordcount',\n\t\t],\n\t\ttoolbar:\n\t\t\t'formatselect | ' +\n\t\t\t'bold italic underline | bullist numlist  | ' +\n\t\t\t'alignleft aligncenter alignright alignjustify | link unlink | undo redo',\n\t\tcontent_style:\n\t\t\t'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }',\n\t},\n};\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\tgetConfig,\n} from '@wordpress/interactivity';\nimport { config as jsConfig } from './config';\n\nconst showLoading = ( e ) => {\n\tconst btn = e.submitter;\n\tbtn.classList.toggle( 'wp-block-formello-button--loading' );\n\tbtn.toggleAttribute( 'disabled' );\n};\n\nconst captchaChallenge = async () => {\n\tconst config = getConfig();\n\tconst context = getContext();\n\tif (\n\t\tcontext.captchaEnabled &&\n\t\t'reCaptcha' === context.captchaType &&\n\t\t'3' === config.settings.reCaptcha.version\n\t) {\n\t\tawait window.grecaptcha.execute();\n\t}\n\tif ( context.captchaEnabled && 'hCaptcha' === context.captchaType ) {\n\t\tawait window.hcaptcha.execute();\n\t}\n};\n\nconst response = ( ref, res ) => {\n\tconst { data } = res;\n\n\t// Should we redirect?\n\tif ( data.redirect_url && res.success ) {\n\t\twindow.location = data.redirect_url;\n\t\treturn false;\n\t}\n\n\t// Should we hide form?\n\tif ( data.hide && res.success ) {\n\t\tconst msg = ref.querySelector( '.formello-message' );\n\t\tref.insertAdjacentElement( 'beforebegin', msg );\n\t\tsetTimeout( () => {\n\t\t\tref.style.display = 'none';\n\t\t\tmsg.scrollIntoView( {\n\t\t\t\tbehavior: 'smooth',\n\t\t\t} );\n\t\t}, '300' );\n\t}\n\n\tif ( data.debug && res.success ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconst deguagData = ref.querySelector( '.formello-debug' );\n\t\tconst position = data.hide ? 'beforebegin' : 'afterend';\n\t\tref.insertAdjacentElement( position, deguagData );\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log( data.debug );\n\t}\n\n\t// clear form\n\tif ( res.success ) {\n\t\tref.reset();\n\t}\n};\n\nconst { state } = store( 'formello', {\n\tstate: {\n\t\tget debugData() {\n\t\t\tconst context = getContext();\n\t\t\treturn JSON.stringify( context.response.data.debug, undefined, 2 );\n\t\t},\n\t\tget message() {\n\t\t\tconst context = getContext();\n\t\t\treturn context.response?.data?.message || '';\n\t\t},\n\t\tget errors() {\n\t\t\tconst context = getContext();\n\t\t\treturn context.response?.data?.errors || [];\n\t\t},\n\t},\n\tactions: {\n\t\tsendForm: async ( e ) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tconst { ref } = getElement();\n\t\t\tconst { id } = ref.dataset;\n\t\t\tconst formData = new FormData( ref );\n\t\t\tformData.append( 'action', 'formello' );\n\t\t\tformData.append( '_formello_id', id );\n\n\t\t\tconst context = getContext();\n\n\t\t\tif ( context.enableJsValidation ) {\n\t\t\t\tconst errors = context.validator.validateAll( ref );\n\t\t\t\tif ( errors.length ) {\n\t\t\t\t\terrors[ 0 ].scrollIntoView( {\n\t\t\t\t\t\tbehavior: 'smooth',\n\t\t\t\t\t\tblock: 'end',\n\t\t\t\t\t\tinline: 'nearest',\n\t\t\t\t\t} );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( context.captchaEnabled ) {\n\t\t\t\tcaptchaChallenge();\n\t\t\t}\n\n\t\t\tshowLoading( e );\n\n\t\t\ttry {\n\t\t\t\tconst config = getConfig();\n\t\t\t\tconst req = await fetch( config.ajax_url, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData,\n\t\t\t\t} );\n\n\t\t\t\tconst res = await req.json();\n\t\t\t\tcontext.response = res;\n\n\t\t\t\tresponse( ref, res );\n\t\t\t\tshowLoading( e );\n\t\t\t} catch ( err ) {\n\t\t\t\tshowLoading( e );\n\t\t\t\tstate.response = { data: { message: err }, success: false };\n\t\t\t}\n\t\t},\n\t\tsetOutput: () => {\n\t\t\tconst { ref } = getElement();\n\t\t\tif ( 'OUTPUT' === ref.nextElementSibling?.nodeName ) {\n\t\t\t\tref.nextElementSibling.value = ref.value;\n\t\t\t}\n\t\t},\n\t},\n\tcallbacks: {\n\t\tinit: () => {\n\t\t\tconst context = getContext();\n\n\t\t\tif ( context.captchaEnabled ) {\n\t\t\t\tcaptchaChallenge();\n\t\t\t}\n\n\t\t\tif ( context.enableJsValidation ) {\n\t\t\t\tconst config = getConfig();\n\t\t\t\tconst { ref } = getElement();\n\t\t\t\tconst { id } = ref.dataset;\n\t\t\t\tcontext.validator = new window.Bouncer(\n\t\t\t\t\t`.wp-block-formello-library[data-id='${ id }']`,\n\t\t\t\t\t{\n\t\t\t\t\t\t...jsConfig.bouncer,\n\t\t\t\t\t\tmessages: {\n\t\t\t\t\t\t\t...jsConfig.bouncer.messages,\n\t\t\t\t\t\t\t...config.settings.messages,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\twindow.tinymce?.init( jsConfig.tinyMce );\n\t\t\twindow.flatpickr?.( 'input.formello-advanced[type=date]' );\n\t\t},\n\t},\n} );\n"],"names":["config","bouncer","disableSubmit","customValidations","valueMismatch","field","selector","getAttribute","otherField","form","querySelector","value","messageCustom","messages","customMessage","tinyMce","setup","editor","on","window","tinymce","triggerSave","menubar","plugins","toolbar","content_style","store","getContext","getElement","getConfig","jsConfig","showLoading","e","btn","submitter","classList","toggle","toggleAttribute","captchaChallenge","context","captchaEnabled","captchaType","settings","reCaptcha","version","grecaptcha","execute","hcaptcha","response","ref","res","data","redirect_url","success","location","hide","msg","insertAdjacentElement","setTimeout","style","display","scrollIntoView","behavior","debug","deguagData","position","console","log","reset","state","debugData","JSON","stringify","undefined","message","errors","actions","sendForm","preventDefault","stopPropagation","id","dataset","formData","FormData","append","enableJsValidation","validator","validateAll","length","block","inline","req","fetch","ajax_url","method","body","json","err","setOutput","nextElementSibling","nodeName","callbacks","init","Bouncer","flatpickr"],"sourceRoot":""}