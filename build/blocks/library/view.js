import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(o={getConfig:()=>e.getConfig,getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},r={},t.d(r,o),r),a={bouncer:{disableSubmit:!0,customValidations:{valueMismatch(e){const t=e.getAttribute("data-bouncer-match");if(!t)return!1;const n=e.form.querySelector("[name="+t+"]");return!!n&&n.value!==e.value}},messageCustom:"data-bouncer-message",messages:{valueMismatch:e=>e.getAttribute("data-bouncer-mismatch-message")||"Please make sure the fields match."}},tinyMce:{selector:"textarea.formello-advanced",setup:e=>{e.on("change",(()=>{window.tinymce.triggerSave()}))},menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"formatselect | bold italic underline | bullist numlist  | alignleft aligncenter alignright alignjustify | link unlink | undo redo",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}},{state:s}=(0,n.store)("formello",{state:{get debugData(){const e=(0,n.getContext)();return JSON.stringify(e.response.data.debug,void 0,2)},get message(){const e=(0,n.getContext)();return e.response?.data?.message||""},get errors(){const e=(0,n.getContext)();return e.response?.data?.errors||[]}},actions:{validateCaptcha:e=>{const{ref:t}=(0,n.getElement)();if(e.preventDefault(),!t.closest("form").checkValidity())return t.closest("form").requestSubmit(t),!1;(0,n.getContext)().isLoading=!0,(async()=>{const e=(0,n.getConfig)(),t=(0,n.getContext)();if(t.captchaEnabled&&"reCaptcha"===t.captchaType&&"invisible"===e.settings.reCaptcha.version)return window.grecaptcha.execute();t.captchaEnabled&&"hCaptcha"===t.captchaType&&await window.hcaptcha.execute({async:!0})})().then((()=>{t.closest("form").requestSubmit(t)}))},sendForm:e=>{e.preventDefault(),e.stopPropagation();const{ref:t}=(0,n.getElement)(),a=(0,n.getContext)();if(a.enableJsValidation&&!t.checkValidity()){const e=t.querySelector("input:invalid, select:invalid");return e?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),void e?.focus()}a.isLoading=!0,(async()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)(),a=(0,n.getConfig)(),{id:s}=e.dataset,o=new FormData(e);o.append("action","formello"),o.append("_formello",a.nonce),o.append("_formello_id",s);try{t.isLoading=!0;const n=await fetch(a.ajax_url,{method:"POST",body:o}),s=await n.json();t.response=s,t.isLoading=!1,((e,t)=>{const{data:n}=t;if(n.redirect_url&&t.success)return window.location=n.redirect_url,!1;if(n.hide&&t.success){const t=e.querySelector(".formello-message");e.insertAdjacentElement("beforebegin",t),setTimeout((()=>{e.style.display="none",t.scrollIntoView({behavior:"smooth"})}),"300")}n.debug&&t.success&&console.log(n.debug),t.success&&e.reset()})(e,s)}catch(e){t.isLoading=!1,t.response="string"==typeof e||e instanceof String?{data:{message:e},success:!1}:{data:{message:"An error occurred"},success:!1}}})()},setOutput:()=>{const{ref:e}=(0,n.getElement)();"OUTPUT"===e.nextElementSibling?.nodeName&&(e.nextElementSibling.value=e.value)},validateInput:()=>{(0,n.getContext)().enableJsValidation&&(()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)(),{settings:a}=(0,n.getConfig)();if("tel"===e.type&&e.classList.contains("formello-advanced")&&!window.intlTelInput.getInstance(e).isValidNumber()?(window.intlTelInput.getInstance(e).getValidationError(),e.setCustomValidity("Please match the number format."),t.error=e.validationMessage):e.setCustomValidity(""),"checkbox"===e.type&&e.getAttribute("name").includes("[]")){const t=e.closest(".wp-block-formello-multichoices").querySelector("input[type=checkbox]:checked"),n=e.closest(".wp-block-formello-multichoices").querySelectorAll("input[type=checkbox]:not(:checked)");t?n.forEach((e=>{e.required=!1})):e.closest(".wp-block-formello-multichoices").querySelectorAll("input[type=checkbox]").forEach((e=>{e.required=!0}))}var s,o;e.validity.rangeOverflow&&(t.error=a.messages.wrongLength.under.replace("{max}",e.getAttribute("max").replace("{length}",e.value.length))),e.validity.rangeUnderflow&&(t.error=a.messages.wrongLength.under.replace("{min}",e.getAttribute("min").replace("{length}",e.value.length))),e.validity.tooShort&&(t.error=a.messages.wrongLength.under.replace("{minLength}",e.getAttribute("minlength").replace("{length}",e.value.length))),e.validity.tooLong&&(t.error=a.messages.wrongLength.over.replace("{maxLength}",e.getAttribute("maxlength").replace("{length}",e.value.length))),(e.validity.typeMismatch||e.validity.badInput)&&(t.error=a.messages.patternMismatch[e.type]),e.validity.patternMismatch&&(t.error=null!==(s=null!==(o=a.messages.patternMismatch[e.type])&&void 0!==o?o:e.getAttribute("data-bouncer-message"))&&void 0!==s?s:a.messages.patternMismatch.default),e.validity.valueMissing&&(t.error=a.messages.missingValue.hasOwnProperty(e.type)?a.messages.missingValue[e.type]:a.messages.missingValue.default)})()}},callbacks:{init:()=>{const e=(0,n.getContext)(),t=(0,n.getConfig)();e.messages={...a.bouncer.messages,...t.settings.messages},window.tinymce?.init(a.tinyMce),window.flatpickr?.("input.formello-advanced[type=date]"),document.querySelectorAll('input[type="tel"].formello-advanced').forEach((e=>{window.intlTelInput?.(e,{loadUtilsOnInit:"https://cdn.jsdelivr.net/npm/intl-tel-input@24.6.0/build/js/utils.js",hiddenInput:e=>({phone:e+"_full",country:e+"_country_code"})})})),document.querySelectorAll("select.formello-advanced").forEach((e=>{new window.TomSelect(e,{create:!0,sortField:{field:"text",direction:"asc"}})}))}}});var o,r;