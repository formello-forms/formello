(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.components,l=window.wp.blockEditor,n=window.wp.element,r=window.ReactJSXRuntime,a=e=>{const{options:l,onChange:a,showValue:i,deleteRow:s}=e,c=(0,n.useRef)(),h=(0,n.useRef)(),u=()=>{const t=[...l],o=t[c.current];t.splice(c.current,1),t.splice(h.current,0,o),c.current=null,h.current=null,e.changeOrder(t)};return l.map(((e,l)=>(0,r.jsxs)(o.Flex,{justify:"flex-start",className:"formello-fields-row",onDragStart:e=>{return t=l,void(c.current=t);var t},onDragEnter:e=>{return t=l,void(h.current=t);var t},onDragEnd:u,draggable:!0,children:[(0,r.jsx)(o.FlexItem,{children:(0,r.jsx)(o.Tooltip,{text:(0,t.__)("Mark selected","formello"),delay:"200",children:(0,r.jsx)(o.CheckboxControl,{checked:e.selected,onChange:e=>a(e,l,"selected"),__nextHasNoMarginBottom:!0})})}),i&&(0,r.jsx)(o.FlexItem,{children:(0,r.jsx)(o.Tooltip,{text:(0,t.__)("The value of the option","formello"),delay:"200",children:(0,r.jsx)(o.TextControl,{placeholder:(0,t.__)("Value","formello"),value:e.value,onChange:e=>a(e,l,"value"),__nextHasNoMarginBottom:!0})})}),(0,r.jsx)(o.FlexItem,{children:(0,r.jsx)(o.Tooltip,{text:(0,t.__)("The label of the option","formello"),delay:"200",children:(0,r.jsx)(o.TextControl,{placeholder:(0,t.__)("Label","formello"),value:e.label,onChange:e=>a(e,l,"label"),__nextHasNoMarginBottom:!0})})}),(0,r.jsx)(o.FlexItem,{children:(0,r.jsx)(o.Button,{isSmall:!0,icon:"no",iconSize:16,onClick:()=>s(e,l)})})]},l)))};function i(e){const{onRequestClose:l,attributes:i,setAttributes:s}=e,[c,h]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1);return(0,r.jsx)(o.Modal,{title:(0,t.__)("Options","formello"),onRequestClose:l,size:"medium",shouldCloseOnClickOutside:!1,children:(0,r.jsxs)("div",{className:"formello-action-modal",children:[(0,r.jsx)(o.ToggleControl,{label:(0,t.__)("Bulk add","formello"),checked:c,onChange:e=>h(e),__nextHasNoMarginBottom:!0}),c&&(0,r.jsx)(o.TextareaControl,{label:(0,t.__)("Options","formello"),help:(0,t.__)("Enter one option per row separated by comma. Ex.: [US, United States Of America]","formello"),placeholder:(0,t.__)("Insert value and label separated by comma. Ex.: US, United States Of America","formello"),defaultValue:i.options.map((e=>e.value+","+e.label)).join("\r\n"),onChange:e=>(e=>{const t=e.match(/[^\r\n]+/g),o=[];for(const e in t){const l=t[e].split(",");o.push({value:l[0],label:l[1]?l[1]:l[0]})}s({options:o})})(e),rows:"6"}),!c&&(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(o.ToggleControl,{label:(0,t.__)("Show value","formello"),checked:u,onChange:e=>m(e),__nextHasNoMarginBottom:!0}),(0,r.jsx)(a,{deleteRow:(e,t)=>{const o=[...i.options];o.splice(t,1),s({options:o})},onChange:(e,t,o)=>{const l=[...i.options],n={...i.options[t]};n[o]=e,l[t]=n,s({options:l})},changeOrder:e=>{s({options:e})},options:i.options,showValue:u}),(0,r.jsx)("div",{children:(0,r.jsx)(o.Button,{variant:"primary",size:"small",onClick:()=>{s({options:[...i.options,{label:"",value:""}]})},children:"Add option"})})]}),(0,r.jsx)("div",{className:"formello-modal-buttons",children:(0,r.jsx)(o.Button,{variant:"primary",onClick:l,children:"Save"})})]})})}const s=window.React;var c;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},h.apply(null,arguments)}var u,m,d,p,v,f=function(e){return s.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),c||(c=s.createElement("path",{fill:"currentColor",d:"M12.75 6h-1.5v4.19L8.288 7.226l-1.061 1.06 2.962 2.963H6v1.5h4.19l-2.963 2.962 1.06 1.061 2.963-2.962V18h1.5v-4.19l2.962 2.963 1.061-1.06-2.962-2.963H18v-1.5h-4.19l2.963-2.962-1.06-1.061-2.963 2.962V6Z"})))};function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},x.apply(null,arguments)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},b.apply(null,arguments)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},g.apply(null,arguments)}function w(e){const{attributes:l,setAttributes:a,name:i}=e,{required:s,showHelp:c,hideLabel:h,type:u}=l,m=(0,r.jsxs)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,r.jsx)(o.Rect,{x:"4.75",y:"17.25",width:"5.5",height:"14.5",transform:"rotate(-90 4.75 17.25)",stroke:"currentColor",fill:"none",strokeWidth:"1.5"}),(0,r.jsx)(o.Rect,{x:"4",y:"7",width:"10",height:"2",fill:"currentColor"})]});return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(o.ToolbarButton,{label:(0,t.__)("Required","formello"),icon:f,isPressed:s,onClick:()=>{a({required:!s})}}),"checkbox"!==u&&(0,r.jsx)(o.ToolbarButton,{label:(0,t.__)("Toggle label visibility","formello"),icon:m,isPressed:!h,onClick:()=>{a({hideLabel:!h})}}),"formello/multichoices"!==i&&(0,r.jsx)(o.ToolbarButton,{label:(0,t.__)("Show help message","formello"),icon:"editor-help",isPressed:c,onClick:()=>{a({showHelp:!c})}})]})}function _(e){var t,o,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(o=_(e[t]))&&(l&&(l+=" "),l+=o)}else for(o in e)e[o]&&(l&&(l+=" "),l+=o);return l}const j=[{name:"checkboxes",title:(0,t.__)("Multiple choices (Checkboxes)"),description:(0,t.__)("Offer users a list of choices, and allow them to select multiple option.","formello-pro"),icon:function(e){return s.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:24,height:24,viewBox:"0 0 300.396 300.396"},e),u||(u=s.createElement("path",{d:"M64.048 216.749H4.076a3 3 0 0 0-3 3v59.973a3 3 0 0 0 3 3h59.972a3 3 0 0 0 3-3v-59.973c0-1.656-1.344-3-3-3zM64.048 17.675H4.076A4.075 4.075 0 0 0 0 21.749v59.973a4.076 4.076 0 0 0 4.076 4.076h59.972a4.075 4.075 0 0 0 4.075-4.076V21.749a4.074 4.074 0 0 0-4.075-4.074zm-44.91 48.986V36.809h29.849v29.852H19.138zM64.048 116.675H4.076A4.075 4.075 0 0 0 0 120.749v59.973a4.076 4.076 0 0 0 4.076 4.076h59.972a4.075 4.075 0 0 0 4.075-4.076v-59.973a4.074 4.074 0 0 0-4.075-4.074zm-44.91 48.986v-29.852h29.849v29.852H19.138zM297.396 231.036h-186.67a3 3 0 0 0-3 3v31.4a3 3 0 0 0 3 3h186.67c1.656 0 3-1.344 3-3v-31.4a3 3 0 0 0-3-3zM110.729 169.438h186.667a3 3 0 0 0 3-3v-31.406c0-1.656-1.344-3-3-3H110.729a3 3 0 0 0-3 3v31.406c0 1.659 1.342 3 3 3zM110.729 70.438h186.667a3 3 0 0 0 3-3V36.032c0-1.656-1.344-3-3-3H110.729a3 3 0 0 0-3 3v31.406c0 1.659 1.342 3 3 3z"})))},attributes:{type:"checkbox"},scope:["inserter","block","transform"],isDefault:!0},{name:"radios",title:(0,t.__)("Single choice (Radio buttons)"),description:(0,t.__)("Offer users a list of choices, and allow them to select a single option.","formello-pro"),icon:function(e){return s.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:24,height:24},e),p||(p=s.createElement("path",{d:"M9 4h13v1H9zm0 17h13v-1H9zm0-8h13v-1H9zM7 4a3 3 0 1 1-3-3 3 3 0 0 1 3 3zM6 4a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2zm1 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm1 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2zm-2-9a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"})),v||(v=s.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})))},attributes:{type:"radio"},scope:["inserter","block","transform"]}];j.forEach((e=>{e.isActive=(e,t)=>e.type===t.type}));const y=j,k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"formello/multichoices","title":"Multi choices","ancestor":["formello/form"],"category":"formello","textdomain":"formello","attributes":{"name":{"type":"string","default":"my_choice","role":"content"},"type":{"enum":["radio","checkbox"],"default":"checkbox"},"required":{"type":"boolean"},"options":{"type":"array","source":"query","selector":"div.wp-block-formello-input","query":{"value":{"type":"string","selector":"input","source":"attribute","attribute":"value"},"label":{"type":"string","selector":"label","source":"html"},"selected":{"type":"boolean","selector":"input","source":"attribute","attribute":"checked"}},"default":[{"value":"1","label":"One"},{"value":"2","label":"Two"},{"value":"3","label":"Three"}]}},"supports":{"anchor":true,"html":false,"spacing":{"padding":true,"blockGap":true},"inserter":true,"__experimentalBorder":true,"layout":{"allowSwitching":true,"allowInheriting":false,"allowSizingOnChildren":false,"allowEditing":true,"allowCustomContentAndWideSize":false,"allowJustification":false,"default":{"type":"flex","justifyContent":"stretch","orientation":"vertical","flexWrap":"nowrap"}}},"example":{"attributes":{"options":[{"label":"Windows"},{"label":"MacOS"},{"label":"Linux"}]}},"editorScript":"file:./index.js"}');(0,e.registerBlockType)(k,{variations:y,icon:function(e){return s.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:80,height:80,viewBox:"0 0 24 24"},e),m||(m=s.createElement("path",{d:"M2 20h1v1H1v-2h1zm20 0h-1v1h2v-2h-1zM1 5h1V4h1V3H1zm1 2H1v2h1zm0 4H1v2h1zm20-2h1V7h-1zm0 4h1v-2h-1zM2 15H1v2h1zm20 2h1v-2h-1zM5 4h2V3H5zm6 0V3H9v1zm2 0h2V3h-2zm6-1h-2v1h2zM5 21h2v-1H5zm4 0h2v-1H9zm4 0h2v-1h-2zm4 0h2v-1h-2zm4-17h1v1h1V3h-2zm-1 4v2a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V8a1.001 1.001 0 0 1 1-1h14a1.001 1.001 0 0 1 1 1zm-.999 2H19V8H5v2h14m1 4v2a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1v-2a1.001 1.001 0 0 1 1-1h14a1.001 1.001 0 0 1 1 1zm-.999 2H19v-2H5v2h14"})),d||(d=s.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})))},edit:function(e){const{attributes:a,setAttributes:s}=e,{name:c,required:h,options:u,type:m}=a,[d,p]=(0,n.useState)(!1),v=function(){for(var e,t,o=0,l="",n=arguments.length;o<n;o++)(e=arguments[o])&&(t=_(e))&&(l&&(l+=" "),l+=t);return l}({"missing-name":!c}),f=(0,l.useBlockProps)({className:v}),{children:x,...b}=(0,l.useInnerBlocksProps)(f,{allowedBlocks:!1,templateLock:!1});return(0,r.jsxs)("div",{...b,children:[(0,r.jsxs)(l.InspectorControls,{children:[(0,r.jsx)(l.BlockControls,{children:(0,r.jsxs)(o.ToolbarGroup,{children:[(0,r.jsx)(w,{...e}),(0,r.jsx)(o.ToolbarButton,{label:(0,t.__)("Edit options","formello"),icon:"editor-ul",onClick:()=>{p(!0)}})]})}),(0,r.jsxs)(o.PanelBody,{title:(0,t.__)("Options","formello"),initialOpen:!0,children:[(0,r.jsx)(o.TextControl,{label:(0,t.__)("Name","formello"),value:c,onChange:e=>s({name:e}),help:(0,t.__)('Affects the "name" attribute of the input element, and is used as a name for the form submission results.',"formello"),__nextHasNoMarginBottom:!0}),(0,r.jsx)(o.ToggleControl,{label:(0,t.__)("Required","formello"),checked:h,onChange:()=>s({required:!h}),__nextHasNoMarginBottom:!0}),(0,r.jsx)(o.Button,{variant:"primary",onClick:()=>{p(!0)},children:(0,t.__)("Manage Options","formello")})]})]}),d&&(0,r.jsx)(i,{...e,onRequestClose:()=>{p(!1)}}),u.map(((e,t)=>{const o=c+"-"+t;return(0,r.jsxs)("div",{className:"wp-block-formello-input",children:[(0,r.jsx)("label",{htmlFor:o,children:e.label}),(0,r.jsx)("input",{value:e.value||e.label,name:c,type:m,required:h,checked:e.selected,id:o})]},t)}))]})},save:function({attributes:e,className:t}){const{name:o,options:n,type:a,required:i}=e,s=l.useBlockProps.save({className:t});return(0,r.jsx)("div",{...s,children:n.map(((e,t)=>{const l=o+"-"+t;return(0,r.jsxs)("div",{className:"wp-block-formello-input",children:[(0,r.jsx)("label",{htmlFor:l,children:e.label}),(0,r.jsx)("input",{value:e.value||e.label,name:"checkbox"===a?o+"[]":o,checked:e.selected,type:a,required:i,id:l,"data-wp-on--input":"actions.validateInput","data-wp-on--blur":"actions.validateInput","data-wp-on--invalid":"actions.validateInput"})]},t)}))})}})})();