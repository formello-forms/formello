(()=>{var e={184:(e,t)=>{var l;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var l=arguments[t];if(l){var a=typeof l;if("string"===a||"number"===a)e.push(l);else if(Array.isArray(l)){if(l.length){var n=r.apply(null,l);n&&e.push(n)}}else if("object"===a)if(l.toString===Object.prototype.toString)for(var s in l)o.call(l,s)&&l[s]&&e.push(s);else e.push(l.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(l=function(){return r}.apply(t,[]))||(e.exports=l)}()}},t={};function l(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,l),a.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.blockEditor,r=window.wp.components,a=window.wp.element,n=window.ReactJSXRuntime,s=e=>e.options.map(((l,o)=>(0,n.jsxs)(r.Flex,{justify:"flex-start",className:"formello-fields-row",children:[(0,n.jsx)(r.FlexItem,{children:(0,n.jsx)(r.CheckboxControl,{checked:l.selected,onChange:t=>e.onChange(t,o,"selected")})}),e.showValue&&(0,n.jsx)(r.FlexItem,{children:(0,n.jsx)(r.TextControl,{placeholder:(0,t.__)("Value","formello"),value:l.value,onChange:t=>e.onChange(t,o,"value")})}),(0,n.jsx)(r.FlexItem,{children:(0,n.jsx)(r.TextControl,{placeholder:(0,t.__)("Label","formello"),value:l.label,onChange:t=>e.onChange(t,o,"label")})}),(0,n.jsx)(r.FlexItem,{children:(0,n.jsx)(r.Button,{isSmall:!0,icon:"no",iconSize:16,onClick:()=>e.delete(l,o)})})]},o)));function i(e){const{onRequestClose:l,attributes:o,setAttributes:i}=e,[c,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1);return(0,n.jsxs)(r.Modal,{title:(0,t.__)("Options","formello"),onRequestClose:l,className:"formello-modal",shouldCloseOnClickOutside:!1,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Bulk add","formello"),checked:c,onChange:e=>d(e)}),c&&(0,n.jsx)(r.TextareaControl,{label:(0,t.__)("Options","formello"),help:(0,t.__)("Enter one option per row separated by comma. Ex.: [US, United States Of America]","formello"),placeholder:(0,t.__)("Insert value and label separated by comma. Ex.: US, United States Of America","formello"),defaultValue:o.options.map((e=>e.value+","+e.label)).join("\r\n"),onChange:e=>(e=>{const t=e.match(/[^\r\n]+/g),l=[];for(const e in t){const o=t[e].split(",");l.push({value:o[0],label:o[1]?o[1]:o[0]})}i({options:l})})(e),rows:"6"}),!c&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Show value","formello"),checked:u,onChange:e=>p(e)}),(0,n.jsx)(s,{delete:(e,t)=>{const l=[...o.options];l.splice(t,1),i({options:l})},onChange:(e,t,l)=>{const r=[...o.options],a={...o.options[t]};a[l]=e,r[t]=a,i({options:r})},options:o.options,showValue:u}),(0,n.jsx)(r.Button,{isPrimary:!0,isSmall:!0,onClick:()=>{i({options:[...o.options,{label:"",value:""}]})},children:"Add option"})]})]}),(0,n.jsx)("div",{className:"formello-modal-buttons",children:(0,n.jsx)(r.Button,{isPrimary:!0,onClick:l,children:"Save"})})]})}var c=l(184),d=l.n(c);function u({attributes:e,setAttributes:l}){const{labelClass:r,labelAlign:a,labelVAlign:s,hideLabel:i,required:c,multiple:u,type:p,label:m,requiredText:h}=e,b=d()("label-div",r,a,s,{hide:i,required:c,"textarea-label":u||"textarea"===p});return(0,n.jsxs)("div",{className:b,htmlFor:"input",children:[(0,n.jsx)(o.RichText,{tagName:"span",value:m,onChange:e=>l({label:e}),placeholder:(0,t.__)("Enter label…","formello"),allowedFormats:["core/bold","core/italic","core/link"]}),c&&(0,n.jsx)("span",{className:"required",children:h})]})}const p=window.React;var m;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var o in l)({}).hasOwnProperty.call(l,o)&&(e[o]=l[o])}return e},h.apply(null,arguments)}var b,f,g=function(e){return p.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),m||(m=p.createElement("path",{fill:"currentColor",d:"M12.75 6h-1.5v4.19L8.288 7.226l-1.061 1.06 2.962 2.963H6v1.5h4.19l-2.963 2.962 1.06 1.061 2.963-2.962V18h1.5v-4.19l2.962 2.963 1.061-1.06-2.962-2.963H18v-1.5h-4.19l2.963-2.962-1.06-1.061-2.963 2.962V6Z"})))};function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var o in l)({}).hasOwnProperty.call(l,o)&&(e[o]=l[o])}return e},x.apply(null,arguments)}const v=window.wp.data;function w(e){const{attributes:l,setAttributes:s,clientId:i}=e,{required:c,showHelp:d,hideLabel:u,type:p}=l,m=(0,n.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,n.jsx)(r.Rect,{x:"4.75",y:"17.25",width:"5.5",height:"14.5",transform:"rotate(-90 4.75 17.25)",stroke:"currentColor",fill:"none",strokeWidth:"1.5"}),(0,n.jsx)(r.Rect,{x:"4",y:"7",width:"10",height:"2",fill:"currentColor"})]});return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(r.ToolbarButton,{label:(0,t.__)("Required","formello"),icon:g,isPressed:c,onClick:()=>{(()=>{const e=(0,v.select)(o.store).getBlockParentsByBlockName(i,"formello/form"),t=(0,v.select)("core/block-editor").getBlockAttributes(e[0]);s({requiredText:t.requiredText})})(),s({required:!c})}}),"checkbox"!==p&&(0,n.jsx)(r.ToolbarButton,{label:(0,t.__)("Toggle label visibility","formello"),icon:m,isPressed:!u,onClick:()=>{s({hideLabel:!u})}}),(0,n.jsx)(r.ToolbarButton,{label:(0,t.__)("Show help message","formello"),icon:"editor-help",isPressed:d,onClick:()=>{s({showHelp:!d})}})]})}window.wp.hooks;const y=window.wp.coreData,_=["formello/input","formello/select","formello/textarea","formello/multichoices"];function j(e){let t=[];const l=function(e){const t=(0,v.select)(o.store).getBlockParentsByBlockName(e,"formello/form");if(t.length)return t[0];const l=(0,v.select)(o.store).getBlock(e);return"formello/form"===l.name?l:void 0}(e);return l&&(t=function(e){const t=[];return function(e){const t=[];return(0,v.select)(o.store).getClientIdsOfDescendants([e]).forEach((e=>{const l=(0,v.select)(o.store).getBlock(e);_.includes(l.name)&&t.push(l)})),t}(e).forEach((e=>{t.push({title:e.attributes.name,tag:"{{fields."+e.attributes.name+"}}"})})),t}(l.clientId)),[{title:"All Data",tag:"{{fields.all_data}}"},...t]}function C(){const{postType:e,postId:t}=(0,v.useSelect)((e=>({postType:e("core/editor").getCurrentPostType(),postId:e("core/editor").getCurrentPostId()}))),[l]=(0,y.useEntityProp)("postType",e,"meta",t),o=[];for(const e in l){if(l[e]!==Object(e))continue;const t={title:e,tag:`{{meta.${e}}}`};o.push(t)}return o}function k({tabs:e,onChange:t}){const[l,o]=(0,a.useState)("");return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(r.SearchControl,{value:l,onChange:o}),(0,n.jsx)(r.TabPanel,{tabs:e,children:e=>e.data.filter((e=>(e=>""===l||-1!==e.title.toLowerCase().search(l.toLowerCase()))(e))).map((e=>(0,n.jsx)(r.MenuItem,{onClick:()=>t(e.tag),info:e.description,children:e.title},e.title)))})]})}function T(e){const{label:t,value:l,placeholder:o,help:a,onChange:s,icon:i="list-view",clientId:c}=e,d=function(e){return[{name:"fields",title:"Fields",data:j(e)},{name:"wordpress",title:"WordPress",data:[{title:"Post ID",tag:"{{wp.post_id}}"},{title:"Post Title",tag:"{{wp.post_title}}"},{title:"Post URL",tag:"{{wp.post_url}}"},{title:"Post Author",tag:"{{wp.post_author}}"},{title:"Post Author Email",tag:"{{wp.post_author_email}}"},{title:"User ID",tag:"{{wp.user_id}}"},{title:"User First Name",tag:"{{wp.user_first_name}}"},{title:"User Last Name",tag:"{{wp.user_last_name}}"},{title:"User Display Name",tag:"{{wp.user_display_name}}"},{title:"User Username",tag:"{{wp.user_username}}"},{title:"User Email",tag:"{{wp.user_email}}"},{title:"User URL",tag:"{{wp.user_url}}"},{title:"Site Title",tag:"{{wp.site_title}}"},{title:"Site URL",tag:"{{wp.site_url}}"},{title:"Admin Email",tag:"{{wp.admin_email}}"}]},{name:"meta",title:"Meta",data:C()},{name:"other",title:"Other",data:[{title:"Date",tag:"{{other.system_date}}"},{title:"Time",tag:"{{other.system_time}}"},{title:"Referrer URL",tag:"{{other.referrer}}"},{title:"User IP",tag:"{{other.user_ip}}"}]}]}(c);return(0,n.jsx)(r.BaseControl,{children:(0,n.jsx)(r.__experimentalInputControl,{value:l,label:t,onChange:s,placeholder:o,help:a,suffix:(0,n.jsx)(r.DropdownMenu,{icon:i,label:t,toggleProps:{isSmall:!0},children:()=>(0,n.jsx)(k,{tabs:d,onChange:s})})})})}const q={hidden:["name","id","type","value"],text:["name","id","type","value","required","readonly","disabled","placeholder","maxlength","minlength","pattern","autocomplete"],tel:["name","id","type","value","required","readonly","disabled","placeholder","maxlength","minlength","pattern","autocomplete"],url:["name","id","type","value","required","readonly","disabled","placeholder","maxlength","minlength","pattern","autocomplete"],email:["name","id","type","value","required","readonly","disabled","placeholder","autocomplete"],password:["name","id","type","required","readonly","disabled","pattern","maxlength","minlength","autocomplete"],number:["name","id","type","value","required","readonly","disabled","placeholder","step","min","max"],date:["name","id","type","value","required","readonly","disabled","step","min","max"],time:["name","id","type","value","required","readonly","disabled","step","min","max"],range:["name","id","type","value","required","readonly","disabled","step","min","max"],checkbox:["name","id","type","value","required","readonly","disabled","checked"],radio:["name","id","type","value","required","readonly","disabled","checked"],file:["name","id","type","required","disabled","accept","capture","multiple"],color:["name","id","type","value","required","readonly","disabled"],textarea:["name","id","required","value","type","readonly","disabled","placeholder","maxlength","minlength","cols","rows"],select:["name","id","required","readonly","disabled","multiple"]};function B(e){const{attributes:l,setAttributes:o,clientId:s,setModalOpen:i,fieldType:c}=e,{type:d,name:u,value:p,placeholder:m,required:h,multiple:b,checked:f,showHelp:g}=l,x=q[c];return(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)(r.PanelBody,{title:(0,t.__)("Options","formello"),initialOpen:!0,children:[(0,n.jsx)(r.TextControl,{label:(0,t.__)("Name","formello"),value:u,onChange:e=>{return o({name:(t=e,t.replace(/[^\p{L}\p{N}]+/gu,"_").toLowerCase().replace(/(^-+)|(-+$)/g,""))});var t},help:(0,t.__)('Affects the "name" attribute of the input element, and is used as a name for the form submission results.',"formello")}),x.includes("value")&&(0,n.jsx)(T,{clientId:s,label:(0,t.__)("Value","formello"),value:p,onChange:e=>{o({value:e})},help:(0,t.__)("The initial value of the control field.","formello")}),x.includes("placeholder")&&(0,n.jsx)(r.TextControl,{label:(0,t.__)("Placeholder","formello"),value:m,onChange:e=>o({placeholder:e}),help:(0,t.__)("Text that appears in the form control when it has no value set.","formello")}),x.includes("required")&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Required","formello"),checked:h,onChange:e=>o({required:e})}),x.includes("multiple")&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Multiple","formello"),checked:b,onChange:e=>o({multiple:e})}),x.includes("checked")&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Checked","formello"),checked:f,onChange:e=>o({checked:e})}),!("hidden"===d)&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Show help message","formello"),checked:g,onChange:e=>o({showHelp:e})}),"select"===c&&(0,n.jsx)(a.Fragment,{children:(0,n.jsx)(r.Button,{variant:"primary",onClick:()=>{i(!0)},children:(0,t.__)("Manage Options","formello")})})]})})}const O=(0,r.withFilters)("formello.advancedOptions")((function(l){const{attributes:{type:s,disabled:i,enableAutoComplete:c,autocomplete:d,readonly:u,advanced:p},setAttributes:m,fieldType:h,clientId:b}=l,f=q[h],g=(0,v.useSelect)((e=>{const{getBlock:t}=e(o.store),l=t(b);return!(!l||!l.innerBlocks.length)}),[b]),{replaceInnerBlocks:x}=(0,v.useDispatch)(o.store);return(0,n.jsxs)(a.Fragment,{children:[f.includes("cols")&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Enable Rich Text","formello"),checked:p,onChange:e=>m({advanced:e})}),f.includes("autocomplete")&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Autocomplete","formello"),checked:c,onChange:e=>m({enableAutoComplete:e}),help:(0,t.__)("Hint for form autofill feature.","formello")}),c&&f.includes("autocomplete")&&(0,n.jsx)(r.TextControl,{label:(0,t.__)("Autocomplete attribute","formello"),value:d,onChange:e=>m({autocomplete:e})}),"range"===s&&(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Show output","formello"),checked:g,onChange:t=>{t?(m({withOutput:!0}),(()=>{let t="formello/button";"range"===s&&(t="formello/output"),x(l.clientId,(0,e.createBlocksFromInnerBlocksTemplate)([[t]]),!0)})()):(m({withOutput:!1}),x(b,[],!0))}}),"hidden"!==s&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Disabled","formello"),checked:i,onChange:e=>m({disabled:e}),help:(0,t.__)("Make the control not accept clicks.","formello")}),(0,n.jsx)(r.ToggleControl,{label:(0,t.__)("Read only","formello"),checked:u,onChange:e=>m({readonly:e}),help:(0,t.__)("Make value not editable.","formello")})]})]})})),S=window.wp.compose,I=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"formello/select","title":"Select","description":"Dropdown select.","category":"formello","ancestor":["formello/form"],"textdomain":"formello","attributes":{"id":{"type":"string","source":"attribute","selector":"select","attribute":"id"},"name":{"type":"string","source":"attribute","selector":"select","attribute":"name"},"label":{"type":"string","source":"html","selector":"label span:not(.required)","default":"My input"},"hideLabel":{"type":"boolean","selector":"label.hide","default":false},"options":{"type":"array","source":"query","selector":"option","query":{"value":{"type":"string","source":"attribute","attribute":"value"},"label":{"type":"string","source":"text"},"selected":{"type":"boolean","source":"attribute","attribute":"selected"}},"default":[{"value":"","label":"Select an option"},{"value":"1","label":"One"},{"value":"2","label":"Two"},{"value":"3","label":"Three"}]},"multiple":{"type":"boolean","source":"attribute","selector":"select","attribute":"multiple"},"required":{"type":"boolean","source":"attribute","selector":"select","attribute":"required"},"requiredText":{"type":"string","source":"text","selector":"label span.required","default":"*"},"disabled":{"type":"boolean","source":"attribute","selector":"select","attribute":"disabled"},"readonly":{"type":"boolean","source":"attribute","selector":"select","attribute":"readonly"},"showHelp":{"type":"boolean","default":false},"help":{"type":"string","source":"html","selector":"small","default":""}},"editorScript":"file:./index.js"}');(0,e.registerBlockType)(I,{icon:function(e){return p.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 16 16"},e),b||(b=p.createElement("path",{d:"M15 4H1c-.6 0-1 .4-1 1v6c0 .6.4 1 1 1h14c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1zm-5 7H1V5h9v6zm3-2.6L11 7h4l-2 1.4z"})),f||(f=p.createElement("path",{fill:"#1e72bd",d:"M2 6h1v4H2V6z"})))},supports:{html:!1,reusable:!1},edit:function e(l){const{attributes:s,setAttributes:c}=l,{name:d,options:p,showHelp:m,help:h,readonly:b,multiple:f,disabled:g}=s,x=function(e,t){const{attributes:l,setAttributes:o}=t,{type:r,label:n,name:s,id:i}=l,c=(0,S.useInstanceId)(e),{postId:d}=(0,v.useSelect)((e=>({postId:e("core/editor").getCurrentPostId()})),[]),u="field_"+d+"-"+r+"-"+c;return(0,a.useEffect)((()=>{var e;i&&!i!==u||o({id:u}),s||o({name:n.length?(e=n,e.replace(/[^\p{L}\p{N}]+/gu,"_").toLowerCase().replace(/(^-+)|(-+$)/g,"")):u})})),u}(e,l),[y,_]=(0,a.useState)(!1),j=(0,o.useBlockProps)({className:"formello"});return(0,n.jsxs)("div",{...j,children:[(0,n.jsxs)(o.InspectorControls,{children:[(0,n.jsx)(o.BlockControls,{children:(0,n.jsxs)(r.ToolbarGroup,{children:[(0,n.jsx)(w,{...l}),(0,n.jsx)(r.ToolbarButton,{label:(0,t.__)("Add options","formello"),icon:"editor-ul",onClick:()=>{_(!0)}})]})}),(0,n.jsx)(B,{...l,setModalOpen:_,fieldType:"select"})]}),(0,n.jsx)(o.InspectorAdvancedControls,{children:(0,n.jsx)(O,{...l,fieldType:"select"})}),(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(u,{...l}),(0,n.jsx)("select",{id:x,name:d,multiple:f,readOnly:b,disabled:g,defaultValue:(()=>{const e=p.filter((e=>!0===e.selected)).map((e=>e.value));return f?e:e[0]})(),children:p.map(((e,t)=>(0,n.jsx)("option",{value:e.value||e.label,children:e.label},t)))}),m&&(0,n.jsx)(o.RichText,{tagName:"small",value:h,onChange:e=>c({val:e}),placeholder:(0,t.__)("Enter help message…","formello"),allowedFormats:["core/bold","core/italic","core/link"]})]}),y&&(0,n.jsx)(i,{...l,onRequestClose:()=>{_(!1)}})]})},save:function({attributes:e}){const{id:t,label:l,hideLabel:r,options:a,required:s,requiredText:i,showHelp:c,help:u}=e,p=d()("select-label",{hide:r}),m=o.useBlockProps.save({className:"formello"}),h=Object.fromEntries(q.select.map((t=>[t,e[t]]))),b=a.filter((e=>!0===e.selected)).map((e=>e.value));return(0,n.jsxs)("div",{...m,children:[(0,n.jsxs)("label",{className:p,htmlFor:t,children:[(0,n.jsx)(o.RichText.Content,{tagName:"span",value:l}),s&&(0,n.jsx)("span",{className:"required",children:i})]}),(0,n.jsx)("select",{...h,defaultValue:b,children:a.map(((e,t)=>(0,n.jsx)("option",{value:e.value||e.label,selected:e.selected,children:e.label},t)))}),c&&(0,n.jsx)(o.RichText.Content,{tagName:"small",value:u})]})}})})()})();